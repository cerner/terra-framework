"use strict";(self.webpackChunkterra_framework=self.webpackChunkterra_framework||[]).push([[45663],{6432:function(e,t,r){var n=r(24994),o=r(73738);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ColumnHighlightColor",{enumerable:!0,get:function(){return m.ColumnHighlightColor}}),t.default=void 0;var a=n(r(41132)),l=n(r(43693)),u=n(r(85715)),i=g(r(96540)),c=n(r(5556)),d=r(8604),s=n(r(67967)),f=g(r(25966)),b=n(r(16524)),w=r(83264),m=g(r(62227)),h=n(r(3321));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var u=a?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(n,l,u):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=s.default.bind(h.default),O={ariaLabelledBy:c.default.string,ariaLabel:c.default.string,id:c.default.string.isRequired,rows:c.default.arrayOf(w.rowShape),sections:c.default.arrayOf(w.sectionShape),columns:c.default.arrayOf(w.columnShape),defaultColumnWidth:c.default.number,columnHeaderHeight:c.default.string,rowHeight:c.default.string,rowMinimumHeight:c.default.string,onCellSelect:c.default.func,onSectionSelect:c.default.func,onClearSelectedCells:c.default.func,onCellRangeSelect:c.default.func,onRowSelect:c.default.func,intl:c.default.shape({formatMessage:c.default.func}).isRequired,hasVisibleColumnHeaders:c.default.bool,isAutoFocusEnabled:c.default.bool};function S(e){var t=e.id,r=e.ariaLabelledBy,n=e.ariaLabel,o=e.rows,l=e.sections,c=e.columns,d=e.defaultColumnWidth,s=e.columnHeaderHeight,w=e.rowHeight,h=e.onCellSelect,p=e.onSectionSelect,g=e.onClearSelectedCells,v=e.onCellRangeSelect,O=e.onRowSelect,S=e.intl,I=e.hasVisibleColumnHeaders,P=e.rowMinimumHeight,E=e.isAutoFocusEnabled,M=(0,i.useRef)(null),_=(0,i.useRef)([]),j=(0,i.useState)(null),k=(0,u.default)(j,2),H=k[0],R=k[1],D=(0,i.useRef)(!1),x=(0,i.useRef)(),W=(0,i.useMemo)((function(){return c.map((function(e){return C(C({},e),{},{isSelectable:!1,isResizable:!1})}))}),[c]),A=W.length?[W[0]]:[],F=W.length>1?W.slice(1):[],L=function(e){return null===e||""===e||"--"===e},K=(0,i.useMemo)((function(){var e=i.default.createElement(i.default.Fragment,null,i.default.createElement("span",{"aria-hidden":!0},S.formatMessage({id:"Terra.flowsheetDataGrid.no-result-display"})),i.default.createElement(b.default,{text:S.formatMessage({id:"Terra.flowsheetDataGrid.no-result"})})),t=(0,a.default)(o);return t.forEach((function(r,n){var o=(0,a.default)(r.cells);o.forEach((function(t,r){o[r].isSelectable=!0,L(t.content)&&0!==r&&(o[r].content=e)})),t[n].cells=o})),t}),[S,o]),T=(0,i.useMemo)((function(){if(!l)return null;var e=i.default.createElement(i.default.Fragment,null,i.default.createElement("span",{"aria-hidden":!0},S.formatMessage({id:"Terra.flowsheetDataGrid.no-result-display"})),i.default.createElement(b.default,{text:S.formatMessage({id:"Terra.flowsheetDataGrid.no-result"})})),t=(0,a.default)(l);return t.forEach((function(r,n){if(r.rows){var o=(0,a.default)(r.rows);o.forEach((function(t,r){var n=(0,a.default)(t.cells);n.forEach((function(t,r){n[r].isSelectable=!1!==t.isSelectable,L(t.content)&&0!==r&&(n[r].content=e)})),o[r].cells=n})),t[n].rows=o}if(r.subsections){var l=(0,a.default)(r.subsections);l.forEach((function(t,r){var n=(0,a.default)(t.rows);n.forEach((function(t,r){var o=(0,a.default)(t.cells);o.forEach((function(t,r){o[r].isSelectable=!1!==t.isSelectable,L(t.content)&&0!==r&&(o[r].content=e)})),n[r].cells=o})),l[r].rows=n}))}})),t}),[S,l]),G=(0,i.useMemo)((function(){return T?T.flatMap((function(e){return e.rows?e.rows.map((function(t){return C(C({},t),{},{sectionId:e.id})})):e.subsections.flatMap((function(t){return t.rows.map((function(r){return C(C({},r),{},{sectionId:e.id,subsectionId:t.id})}))}))})):K}),[T,K]);(0,i.useEffect)((function(){var e=(0,a.default)(_.current),t=[];G.forEach((function(e){e.cells.forEach((function(r,n){r.isSelected&&t.push({rowId:e.id,columnId:c[n].id})}))})),_.current=[].concat(t),_.current.length||(M.current=null),e.length>0&&0===_.current.length?R(S.formatMessage({id:"Terra.flowsheetDataGrid.no-cells-selected"})):_.current.length&&R(S.formatMessage({id:"Terra.flowsheetDataGrid.cells-selected"},{cellCount:_.current.length}))}),[S,G,c,R]);var Y=(0,i.useCallback)((function(e,t,r,n){if(null!==M.current){var o=G.findIndex((function(e){return e.id===M.current.rowId})),a=c.findIndex((function(e){return e.id===M.current.columnId})),l=G.findIndex((function(t){return t.id===e})),u=c.findIndex((function(e){return e.id===t})),i=Math.min(o,l),d=Math.max(o,l),s=Math.min(a,u),f=Math.max(a,u);if(T){var b=T.find((function(e){return e.id===r})),w=0,m=0;if(n){var h=b.subsections.find((function(e){return e.id===n}));m=(w=G.findIndex((function(e){return e.subsectionId===n})))+h.rows.length-1}else m=(w=G.findIndex((function(e){return e.sectionId===r})))+b.rows.length-1;i=o<=w?w:i,d=o>=m?m:d}for(var p=[],g=i;g<=d;g+=1)for(var C=G[g].id,y=s;y<=f;y+=1){var O=c[y].id;p.push({rowId:C,columnId:O,sectionId:r})}v&&v(p)}}),[G,T,c,v]),B=(0,i.useCallback)((function(e,t){0===e.columnIndex?O&&O({rowId:e.rowId,sectionId:e.sectionId,isMetaPressed:e.isMetaPressed}):e.isShiftPressed&&null!==M.current?Y(e.rowId,e.columnId,e.sectionId,e.subsectionId):h&&(M.current={rowId:e.rowId,columnId:e.columnId,sectionId:e.sectionId},h({rowId:e.rowId,columnId:e.columnId,sectionId:e.sectionId,subsectionId:e.subsectionId,isMetaPressed:e.isMetaPressed},t))}),[h,O,Y]),z=(0,i.useCallback)((function(e,t,r){if(!(t<=0)||D.current){var n=x.current.getGridRef(),o="";if(T)for(var a=e;a>0;a-=1){var l=n.rows[a].getAttribute("data-section-id");if(l){o=l;break}}D.current||(D.current=!0,null!==M.current||n.rows[e].hasAttribute("data-section-id")||(M.current={rowId:n.rows[e].getAttribute("data-row-id"),columnId:c[t].id,sectionId:o}));var u=e,i=t;switch(r){case f.KEY_UP:u-=1;break;case f.KEY_DOWN:u+=1;break;case f.KEY_LEFT:i-=1;break;case f.KEY_RIGHT:i+=1}u<=0?u=1:u>=n.rows.length&&(u=n.rows.length-1),i<=0?i=1:i>=c.length&&(i=c.length-1);var d=c[i].id,s=n.rows[u].getAttribute("data-row-id");if(!n.rows[u].hasAttribute("data-section-id")&&!n.rows[u].hasAttribute("data-subsection-id")){for(var b="",w="",m=u;m>0;m-=1){if(n.rows[m].hasAttribute("data-section-id")){b=n.rows[m].getAttribute("data-section-id");break}if(n.rows[m].hasAttribute("data-subsection-id")){w=n.rows[m].getAttribute("data-subsection-id"),b=n.rows[m].getAttribute("data-subsection-section-id");break}}Y(s,d,b,w)}}}),[T,c,Y]);return i.default.createElement("div",{className:y("flowsheet-data-grid-container"),onKeyUp:function(e){if(e.keyCode===f.KEY_SHIFT)D.current&&(D.current=!1,M.current=null)}},i.default.createElement(m.default,{id:t,ariaLabel:n,ariaLabelledBy:r,rows:K,sections:T,rowHeight:w,rowHeaderIndex:0,pinnedColumns:A,overflowColumns:F,defaultColumnWidth:d,columnHeaderHeight:s,onCellSelect:B,onSectionSelect:p,onClearSelection:g,onCellRangeSelect:z,hasVisibleColumnHeaders:I,ref:x,rowMinimumHeight:P,isAutoFocusEnabled:E}),i.default.createElement(b.default,{"aria-live":"polite",text:H}))}S.propTypes=O,S.defaultProps={defaultColumnWidth:200,columnHeaderHeight:"2.5rem",rows:[],columns:[],hasVisibleColumnHeaders:!0};t.default=(0,d.injectIntl)(S)},44034:function(e,t,r){var n=r(24994),o=r(73738);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(43693)),l=m(r(96540)),u=n(r(5556)),i=n(r(67967)),c=m(r(25966)),d=r(83264),s=n(r(8247)),f=n(r(62227)),b=n(r(78323));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var u=a?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(n,l,u):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=i.default.bind(s.default),v={ariaLabelledBy:u.default.string,ariaLabel:u.default.string,id:u.default.string.isRequired,rows:u.default.arrayOf(d.rowShape),pinnedColumns:u.default.arrayOf(d.columnShape),overflowColumns:u.default.arrayOf(d.columnShape),defaultColumnWidth:u.default.number,columnHeaderHeight:u.default.string,rowHeight:u.default.string,rowHeaderIndex:d.validateRowHeaderIndex,onColumnResize:u.default.func,onCellSelect:u.default.func,onRowSelect:u.default.func,onRowSelectAll:u.default.func,onColumnSelect:u.default.func,onClearSelectedRows:u.default.func,onClearSelectedCells:u.default.func,onDisableSelectableRows:u.default.func,onEnableRowSelection:u.default.func,hasSelectableRows:u.default.bool,isAutoFocusEnabled:u.default.bool};function C(e){var t,r=e.id,n=e.ariaLabelledBy,o=e.ariaLabel,a=e.rows,u=e.pinnedColumns,i=e.overflowColumns,d=e.onColumnResize,s=e.defaultColumnWidth,w=e.columnHeaderHeight,m=e.rowHeight,h=e.onColumnSelect,v=e.onCellSelect,C=e.onRowSelect,y=e.onRowSelectAll,O=e.onClearSelectedRows,S=e.onClearSelectedCells,I=e.onDisableSelectableRows,P=e.onEnableRowSelection,E=e.hasSelectableRows,M=e.rowHeaderIndex,_=e.isAutoFocusEnabled,j=(0,l.useRef)(!1),k=(0,l.useRef)({start:null,end:null}),H=(0,l.useRef)(),R=(0,l.useRef)(!1),D=null===(t=document.getElementById("".concat(r,"-worklist-data-grid-container")))||void 0===t?void 0:t.contains(document.activeElement),x=function(e){return e.map((function(e){return p(p({},e),{},{isResizable:!1!==e.isResizable,isSelectable:!1!==e.isSelectable})}))},W=(0,l.useMemo)((function(){return x(u)}),[u]),A=(0,l.useMemo)((function(){return x(i)}),[i]);(0,l.useEffect)((function(){if(E||(k.current={}),R.current){var e=H.current.getFocusedCell();e={row:e.row,col:Math.max(e.col+(E?1:-1),0)},H.current.setFocusedRowCol(e.row,e.col,D)}}),[E]);var F=(0,l.useCallback)((function(){E?(k.current={},a.some((function(e){return e.isSelected}))?O&&O():I&&I()):S&&S()}),[E,S,O,I,a]),L=(0,l.useCallback)((function(e){var t=[];return k.current.end?(k.current.start>k.current.end?e>k.current.end&&(t=a.slice(k.current.end-1,Math.min(e,k.current.start)-1).map((function(e){return{id:e.id,selected:!1}}))):k.current.start<k.current.end&&e<k.current.end&&(t=a.slice(Math.max(k.current.start,e),k.current.end).map((function(e){return{id:e.id,selected:!1}}))),t):t}),[a]),K=(0,l.useCallback)((function(e){if(E||P(),C){var t=Math.min(k.current.start,e),r=Math.max(k.current.start,e),n=a.slice(t-1,r).map((function(e){return{id:e.id,selected:!0}}));n=n.concat(L(e)),C(n),k.current.end=e}}),[E,P,C,a,L]),T=(0,l.useCallback)((function(e,t){var r=[];a[t-1].isSelected?(t===k.current.start&&(k.current={}),r.push({id:e,selected:!1})):(k.current={start:t,end:null},r.push({id:e,selected:!0})),C&&C(r)}),[C,a]),G=(0,l.useCallback)((function(e,t,r){var n=e;r===c.KEY_UP?0===(n-=1)&&(n=1):r===c.KEY_DOWN&&(n+=1),j.current||(j.current=!0,k.current={start:e,end:null}),K(n)}),[K]),Y=(0,l.useCallback)((function(e){E?e.isShiftPressed&&k.current.start?K(e.rowIndex):T(e.rowId,e.rowIndex):e.isShiftPressed&&(k.current={start:e.rowIndex,end:null},K(e.rowIndex))}),[E,K,T]),B=(0,l.useCallback)((function(e,t){E||e.isShiftPressed?Y(e):e.isCellSelectable&&v&&v(e.rowId,e.columnId,t)}),[Y,E,v]),z=(0,l.useCallback)((function(){h(b.default.ROW_SELECTION_COLUMN.id)}),[h]);return l.default.createElement("div",{id:"".concat(r,"-worklist-data-grid-container"),onKeyDown:function(e){if(e.keyCode===c.KEY_A)E&&(e.ctrlKey||e.metaKey)&&(y&&y(),e.preventDefault())},onKeyUp:function(e){if(e.keyCode===c.KEY_SHIFT)j.current=!1},className:g("worklist-data-grid-container"),onFocus:R.current?void 0:function(){R.current=!0}},l.default.createElement(f.default,{id:r,ariaLabel:o,ariaLabelledBy:n,rows:a,rowHeight:m,rowHeaderIndex:M,pinnedColumns:W,overflowColumns:A,defaultColumnWidth:s,columnHeaderHeight:w,onColumnSelect:h,onRowSelectionHeaderSelect:h?z:void 0,onColumnResize:d,onCellSelect:B,onClearSelection:F,onRangeSelection:G,hasSelectableRows:E,isAutoFocusEnabled:_,ref:H}))}C.propTypes=v,C.defaultProps={rowHeaderIndex:0,defaultColumnWidth:200,columnHeaderHeight:"2.5rem",rowHeight:"2.5rem",pinnedColumns:[],overflowColumns:[],rows:[]};t.default=C},45663:function(e,t,r){var n=r(24994),o=r(73738);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ColumnHighlightColor",{enumerable:!0,get:function(){return l.ColumnHighlightColor}}),Object.defineProperty(t,"FlowsheetDataGrid",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"WorklistDataGrid",{enumerable:!0,get:function(){return a.default}});var a=n(r(44034)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&{}.hasOwnProperty.call(e,l)){var i=a?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(n,l,i):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}(r(6432));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}},3321:function(e,t,r){r.r(t),t.default={"flowsheet-data-grid-container":"FlowsheetDataGrid-module__flowsheet-data-grid-container___O1y8B"}},8247:function(e,t,r){r.r(t),t.default={"worklist-data-grid-container":"WorklistDataGrid-module__worklist-data-grid-container___IbMs4"}}}]);