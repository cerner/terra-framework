"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = require("react");
var _propTypes = _interopRequireDefault(require("prop-types"));
var _v = _interopRequireDefault(require("uuid/v4"));
var _ApplicationLoadingOverlayContext = _interopRequireDefault(require("./ApplicationLoadingOverlayContext"));
var propTypes = {
  /**
   * A boolean value indicating whether the loading overlay should be visible or not.
   */
  isOpen: _propTypes.default.bool,
  /**
   * A string indicating the background style for the overlay. One of: `dark`, `light`, `clear`.
   */
  backgroundStyle: _propTypes.default.oneOf(['dark', 'light', 'clear'])
};
var defaultProps = {
  backgroundStyle: 'clear'
};
var ApplicationLoadingOverlay = function ApplicationLoadingOverlay(_ref) {
  var isOpen = _ref.isOpen,
    backgroundStyle = _ref.backgroundStyle;
  var idRef = (0, _react.useRef)((0, _v.default)());
  var applicationLoadingOverlay = (0, _react.useContext)(_ApplicationLoadingOverlayContext.default);
  (0, _react.useLayoutEffect)(function () {
    var overlayId = idRef.current;
    if (isOpen) {
      applicationLoadingOverlay.show(overlayId, {
        backgroundStyle: backgroundStyle
      });
    } else {
      applicationLoadingOverlay.hide(overlayId);
    }
    return function () {
      applicationLoadingOverlay.hide(overlayId);
    };
  }, [isOpen, backgroundStyle, idRef, applicationLoadingOverlay]);
  return null;
};
ApplicationLoadingOverlay.propTypes = propTypes;
ApplicationLoadingOverlay.defaultProps = defaultProps;
var _default = ApplicationLoadingOverlay;
exports.default = _default;