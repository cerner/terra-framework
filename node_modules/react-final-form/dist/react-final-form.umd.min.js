!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("final-form")):"function"==typeof define&&define.amd?define(["exports","react","final-form"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["react-final-form"]={},e.React,e.FinalForm)}(this,function(e,t,h){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function n(r){if(r&&r.__esModule)return r;var n=Object.create(null);return r&&Object.keys(r).forEach(function(e){var t;"default"!==e&&(t=Object.getOwnPropertyDescriptor(r,e),Object.defineProperty(n,e,t.get?t:{enumerable:!0,get:function(){return r[e]}}))}),n.default=r,Object.freeze(n)}var w=n(t),O=r(t);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function F(e,t){if(null==e)return{};for(var r,n={},i=Object.keys(e),u=0;u<i.length;u++)r=i[u],0<=t.indexOf(r)||(n[r]=e[r]);return n}var a=["render","children","component"];function E(e,t,r){var n=e.render,i=e.children,u=e.component,e=F(e,a);if(u)return w.createElement(u,Object.assign(t,e,{children:i,render:n}));if(n)return n(void 0===i?Object.assign(t,e):Object.assign(t,e,{children:i}));if("function"!=typeof i)throw new Error("Must specify either a render prop, a render function as children, or a component prop to "+r);return i(Object.assign(t,e))}function V(e,t,r){void 0===r&&(r=function(e,t){return e===t});var n=O.default.useRef(e);O.default.useEffect(function(){r(e,n.current)||(t(),n.current=e)})}function j(e,t){if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),u=0;u<r.length;u++){var a=r[u];if(!i(a)||e[a]!==t[a])return!1}return!0}function C(e){return!(!e||"function"!=typeof e.stopPropagation)}var R=w.createContext();function k(e){var t=O.default.useRef(e);return O.default.useEffect(function(){t.current=e}),t}var i="6.5.8",x=function(t,r,e){e.forEach(function(e){Object.defineProperty(t,e,{get:function(){return r[e]},enumerable:!0})})},P=function(e,t){return x(e,t,["active","dirty","dirtyFields","dirtySinceLastSubmit","dirtyFieldsSinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitError","submitErrors","submitFailed","submitSucceeded","submitting","touched","valid","validating","values","visited"])},B=["debug","decorators","destroyOnUnregister","form","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur"],q={"final-form":h.version,"react-final-form":i},A=h.formSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});function u(e){var t=e.debug,r=e.decorators,n=void 0===r?[]:r,i=e.destroyOnUnregister,u=e.form,a=e.initialValues,o=e.initialValuesEqual,c=e.keepDirtyOnReinitialize,f=e.mutators,l=e.onSubmit,s=e.subscription,d=void 0===s?A:s,v=e.validate,m=e.validateOnBlur,r=F(e,B),p={debug:t,destroyOnUnregister:i,initialValues:a,keepDirtyOnReinitialize:c,mutators:f,onSubmit:l,validate:v,validateOnBlur:m},b=(s=function(){var e=u||h.createForm(p);return e.pauseValidation(),e},(e=O.default.useRef()).current||(e.current=s()),e.current),s=w.useState(function(){var t={};return b.subscribe(function(e){t=e},d)(),t}),e=s[0],g=s[1],y=k(e);w.useEffect(function(){b.isValidationPaused()&&b.resumeValidation();var e=[b.subscribe(function(e){j(e,y.current)||g(e)},d)].concat(n?n.map(function(e){return e(b)}):[]);return function(){b.pauseValidation(),e.reverse().forEach(function(e){return e()})}},n),V(t,function(){b.setConfig("debug",t)}),V(i,function(){b.destroyOnUnregister=!!i}),V(c,function(){b.setConfig("keepDirtyOnReinitialize",c)}),V(a,function(){b.setConfig("initialValues",a)},o||j),V(f,function(){b.setConfig("mutators",f)}),V(l,function(){b.setConfig("onSubmit",l)}),V(v,function(){b.setConfig("validate",v)}),V(m,function(){b.setConfig("validateOnBlur",m)});o={form:S({},b,{reset:function(e){C(e)?b.reset():b.reset(e)}}),handleSubmit:function(e){return e&&("function"==typeof e.preventDefault&&e.preventDefault(),"function"==typeof e.stopPropagation&&e.stopPropagation()),b.submit()}};return P(o,e),w.createElement(R.Provider,{value:b},E(S({},r,{__versions:q}),o,"ReactFinalForm"))}function D(e){var t=w.useContext(R);if(!t)throw new Error((e||"useForm")+" must be used inside of a <Form> component");return t}function o(e){var t=void 0===e?{}:e,r=t.onChange,e=t.subscription,n=void 0===e?A:e,i=D("useFormState"),u=w.useRef(!0),a=w.useRef(r);a.current=r;var t=w.useState(function(){var t={};return i.subscribe(function(e){t=e},n)(),r&&r(t),t}),e=t[0],o=t[1];w.useEffect(function(){return i.subscribe(function(e){u.current?u.current=!1:(o(e),a.current&&a.current(e))},n)},[]);t={};return P(t,e),t}var c=["onChange","subscription"];function f(e){var t=e.onChange,r=e.subscription,e=F(e,c),n=D("FormSpy"),r=o({onChange:t,subscription:r});if(t)return null;t={form:S({},n,{reset:function(e){C(e)?n.reset():n.reset(e)}})};return E(S({},e,t),r,"FormSpy")}var U="undefined"!=typeof window&&window.navigator&&window.navigator.product&&"ReactNative"===window.navigator.product,_=function(e){var t=[];if(e)for(var r=0;r<e.length;r++){var n=e[r];n.selected&&t.push(n.value)}return t};function z(e){var n=w.useRef(e);return w.useEffect(function(){n.current=e}),w.useCallback(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.current.apply(null,t)},[])}function L(e,t){return void 0===e?"":e}function N(e,t){return""===e?void 0:e}function M(e,t){return e===t}var T=h.fieldSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});function I(n,e){function r(e,t){return h.registerField(n,e,p,{afterSubmit:i,beforeSubmit:function(){var e=O.current,t=e.beforeSubmit,r=e.formatOnBlur,e=e.format;return!r||(e=(void 0===e?L:e)(r=h.getFieldState(n).value,n))!==r&&h.change(n,e),t&&t()},data:o,defaultValue:c,getValidator:function(){return O.current.validate},initialValue:d,isEqual:function(e,t){return(O.current.isEqual||M)(e,t)},silent:t,validateFields:g})}var t=e=void 0===e?{}:e,i=t.afterSubmit,u=t.allowNull,a=t.component,o=t.data,c=t.defaultValue,f=t.format,l=void 0===f?L:f,s=t.formatOnBlur,d=t.initialValue,v=t.multiple,f=t.parse,m=void 0===f?N:f,f=t.subscription,p=void 0===f?T:f,b=t.type,g=t.validateFields,y=t.value,h=D("useField"),O=k(e),S=w.useRef(!0),t=w.useState(function(){var t={},e=h.destroyOnUnregister;return h.destroyOnUnregister=!1,r(function(e){t=e},!0)(),h.destroyOnUnregister=e,t}),F=t[0],E=t[1];w.useEffect(function(){return r(function(e){S.current?S.current=!1:E(e)},!1)},[n,o,c,d]);e={};x(e,F,["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","modifiedSinceLastSubmit","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","validating","visited"]);t={name:n,get value(){var e=F.value;return s?"input"===a&&(e=L(e)):e=l(e,n),null!==e||u||(e=""),"checkbox"===b||"radio"===b?y:"select"===a&&v?e||[]:e},get checked(){var e=F.value;return"checkbox"===b?(e=l(e,n),void 0===y?!!e:!(!Array.isArray(e)||!~e.indexOf(y))):"radio"===b?l(e,n)===y:void 0},onBlur:z(function(e){var t;F.blur(),s&&(t=h.getFieldState(F.name),F.change(l(t.value,F.name)))}),onChange:z(function(e){e=e&&e.target?function(e,t,r,n){if(!n&&e.nativeEvent&&void 0!==e.nativeEvent.text)return e.nativeEvent.text;if(n&&e.nativeEvent)return e.nativeEvent.text;var i=e.target,n=i.type,u=i.value,a=i.checked;switch(n){case"checkbox":if(void 0===r)return!!a;if(a)return Array.isArray(t)?t.concat(r):[r];if(!Array.isArray(t))return t;var o=t.indexOf(r);return o<0?t:t.slice(0,o).concat(t.slice(o+1));case"select-multiple":return _(e.target.options);default:return u}}(e,F.value,y,U):e;F.change(m(e,n))}),onFocus:z(function(e){return F.focus()})};return v&&(t.multiple=v),void 0!==b&&(t.type=b),{input:t,meta:e}}var G=["afterSubmit","allowNull","beforeSubmit","children","component","data","defaultValue","format","formatOnBlur","initialValue","isEqual","multiple","name","parse","subscription","type","validate","validateFields","value"],t=w.forwardRef(function(e,t){var r=e.afterSubmit,n=e.allowNull,i=e.beforeSubmit,u=e.children,a=e.component,o=e.data,c=e.defaultValue,f=e.format,l=e.formatOnBlur,s=e.initialValue,d=e.isEqual,v=e.multiple,m=e.name,p=e.parse,b=e.subscription,g=e.type,y=e.validate,h=e.validateFields,O=e.value,e=F(e,G),O=I(m,{afterSubmit:r,allowNull:n,beforeSubmit:i,children:u,component:a,data:o,defaultValue:c,format:f,formatOnBlur:l,initialValue:s,isEqual:d,multiple:v,parse:p,subscription:b,type:g,validate:y,validateFields:h,value:O});if("function"==typeof u)return u(S({},O,e));if("string"==typeof a)return w.createElement(a,S({},O.input,{children:u,ref:t},e));if(!m)throw new Error("prop name cannot be undefined in <Field> component");return E(S({children:u,component:a,ref:t},e),O,"Field("+m+")")});e.Field=t,e.Form=u,e.FormSpy=f,e.useField=I,e.useForm=D,e.useFormState=o,e.version=i,e.withTypes=function(){return{Form:u,FormSpy:f}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=react-final-form.umd.min.js.map
