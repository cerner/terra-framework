"use strict";(self.webpackChunkterra_framework=self.webpackChunkterra_framework||[]).push([[55730],{51415:function(e,t,r){var n=r(64836),l=r(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(861)),u=n(r(27424)),o=g(r(67294)),i=n(r(45697)),c=r(25387),d=n(r(47166)),s=g(r(51051)),f=n(r(29270)),w=n(r(99254)),m=r(28409),p=n(r(98834)),C=n(r(29877)),b=n(r(99722));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}var S=d.default.bind(C.default),v={ariaLabelledBy:i.default.string,ariaLabel:i.default.string,id:i.default.string.isRequired,rows:i.default.arrayOf(w.default),pinnedColumns:i.default.arrayOf(m.columnShape),overflowColumns:i.default.arrayOf(m.columnShape),defaultColumnWidth:i.default.number,columnHeaderHeight:i.default.string,rowHeight:i.default.string,rowHeaderIndex:p.default,onColumnResize:i.default.func,onCellSelect:i.default.func,onRowSelect:i.default.func,onRowSelectAll:i.default.func,onColumnSelect:i.default.func,onClearSelectedRows:i.default.func,onClearSelectedCells:i.default.func,onDisableSelectableRows:i.default.func,onEnableRowSelection:i.default.func,hasSelectableRows:i.default.bool,intl:i.default.shape({formatMessage:i.default.func}).isRequired};function k(e){var t=e.id,r=e.ariaLabelledBy,n=e.ariaLabel,l=e.rows,i=e.pinnedColumns,c=e.overflowColumns,d=e.onColumnResize,w=e.defaultColumnWidth,m=e.columnHeaderHeight,p=e.rowHeight,C=e.onColumnSelect,h=e.onCellSelect,g=e.onRowSelect,v=e.onRowSelectAll,k=e.onClearSelectedRows,R=e.onClearSelectedCells,y=e.onDisableSelectableRows,M=e.onEnableRowSelection,D=e.hasSelectableRows,H=e.intl,_=e.rowHeaderIndex,I=(0,o.useRef)(!1),x=(0,o.useRef)([]),O=(0,o.useState)(null),P=(0,u.default)(O,2),E=P[0],j=P[1],G=(0,o.useState)(null),T=(0,u.default)(G,2),W=T[0],K=T[1],L=(0,o.useRef)(!1),F=(0,o.useRef)({start:null,end:null}),Y=(0,o.useRef)(!1),z=(0,o.useRef)(),A=(0,o.useRef)(!1);(0,o.useEffect)((function(){if(I.current){if(D||(F.current={},x.current=[]),K(H.formatMessage({id:D?"Terra.worklistDataGrid.row-selection-mode-enabled":"Terra.worklistDataGrid.row-selection-mode-disabled"})),A.current){var e=z.current.getFocusedCell();e={row:e.row,col:Math.max(e.col+(D?1:-1),0)},z.current.setFocusedRowCol(e.row,e.col,Y.current)}Y.current=!1}else I.current=!0}),[D]),(0,o.useEffect)((function(){var e=(0,a.default)(x.current);if(x.current=l.filter((function(e){return e.isSelected})).map((function(e){return e.id})),e.length>0&&0===x.current.length)j(H.formatMessage({id:"Terra.worklistDataGrid.all-rows-unselected"}));else if(x.current.length===l.length)j(H.formatMessage({id:"Terra.worklistDataGrid.all-rows-selected"}));else{var t=x.current.filter((function(t){return!e.includes(t)})),r=e.filter((function(e){return!x.current.includes(e)})),n="";if(1===t.length){var u=l.findIndex((function(e){return e.id===t[0]})),o=l[u].ariaLabel||u+1;n=H.formatMessage({id:"Terra.worklistDataGrid.row-selection-template"},{row:o})}else t.length>1&&(n=H.formatMessage({id:"Terra.worklistDataGrid.multiple-rows-selected"},{rowCount:t.length}));if(1===r.length){var i=l.findIndex((function(e){return e.id===r[0]})),c=l[i].ariaLabel||i+1;n+=H.formatMessage({id:"Terra.worklistDataGrid.row-selection-cleared-template"},{row:c})}else r.length>1&&(n+=H.formatMessage({id:"Terra.worklistDataGrid.multiple-rows-unselected"},{rowCount:r.length}));n&&j(n)}}),[H,l]);var B=(0,o.useCallback)((function(){D?(F.current={},l.some((function(e){return e.isSelected}))?k&&k():y&&(Y.current=!0,y())):R&&R()}),[D,R,k,y,l]),q=(0,o.useCallback)((function(e){var t=[];return F.current.end?(F.current.start>F.current.end?e>F.current.end&&(t=l.slice(F.current.end-1,Math.min(e,F.current.start)-1).map((function(e){return{id:e.id,selected:!1}}))):F.current.start<F.current.end&&e<F.current.end&&(t=l.slice(Math.max(F.current.start,e),F.current.end).map((function(e){return{id:e.id,selected:!1}}))),t):t}),[l]),N=(0,o.useCallback)((function(e){if(D||M(),g){var t=Math.min(F.current.start,e),r=Math.max(F.current.start,e),n=l.slice(t-1,r).map((function(e){return{id:e.id,selected:!0}}));n=n.concat(q(e)),g(n),F.current.end=e}}),[D,M,g,l,q]),U=(0,o.useCallback)((function(e,t){var r=[];l[t-1].isSelected?(t===F.current.start&&(F.current={}),r.push({id:e,selected:!1})):(F.current={start:t,end:null},r.push({id:e,selected:!0})),g&&g(r)}),[g,l]),J=(0,o.useCallback)((function(e,t,r){var n=e;r===s.KEY_UP?0===(n-=1)&&(n=1):r===s.KEY_DOWN&&(n+=1),L.current||(L.current=!0,F.current={start:e,end:null}),N(n)}),[N]),Q=(0,o.useCallback)((function(e){D?e.isShiftPressed&&F.current.start?N(e.rowIndex):U(e.rowId,e.rowIndex):e.isShiftPressed&&(F.current={start:e.rowIndex,end:null},N(e.rowIndex))}),[D,N,U]),V=(0,o.useCallback)((function(e){D||e.isShiftPressed?Q(e):e.isCellSelectable&&h&&h(e.rowId,e.columnId)}),[Q,D,h]);return o.default.createElement("div",{onKeyDown:function(e){if(e.keyCode===s.KEY_A)D&&(e.ctrlKey||e.metaKey)&&(v&&v(),e.preventDefault())},onKeyUp:function(e){if(e.keyCode===s.KEY_SHIFT)L.current=!1},className:S("worklist-data-grid-container"),onFocus:function(){A.current=!0}},o.default.createElement(b.default,{id:t,ariaLabel:n,ariaLabelledBy:r,rows:l,rowHeight:p,rowHeaderIndex:_,pinnedColumns:i,overflowColumns:c,defaultColumnWidth:w,columnHeaderHeight:m,onColumnSelect:C,onColumnResize:d,onCellSelect:V,onClearSelection:B,onRangeSelection:J,hasSelectableRows:D,ref:z}),o.default.createElement(f.default,{"aria-live":"polite",text:W}),o.default.createElement(f.default,{"aria-live":"polite",text:E}))}k.propTypes=v,k.defaultProps={rowHeaderIndex:0,defaultColumnWidth:200,columnHeaderHeight:"2.5rem",rowHeight:"2.5rem",pinnedColumns:[],overflowColumns:[]};var R=(0,c.injectIntl)(k);t.default=R},55730:function(e,t,r){var n=r(64836);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"WorklistDataGrid",{enumerable:!0,get:function(){return l.default}});var l=n(r(51415))},29877:function(e,t,r){r.r(t),t.default={"worklist-data-grid-container":"WorklistDataGrid-module__worklist-data-grid-container___IbMs4"}}}]);