"use strict";(self.webpackChunkterra_framework=self.webpackChunkterra_framework||[]).push([[45186],{58833:function(e,t,i){var n=i(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(i(10434)),s=n(i(70215)),a=n(i(56690)),d=n(i(89728)),r=n(i(66115)),l=n(i(61655)),h=n(i(94993)),u=n(i(73808)),c=n(i(67294)),f=n(i(45697)),p=n(i(47166)),g=i(25387),m=n(i(32018)),v=n(i(93670)),y=n(i(29270)),I=n(i(91709)),b=n(i(13655)),C=["ariaLabel","children","dividerStyle","initialLoadingIndicator","intl","isFinishedLoading","onRequestItems","paddingStyle","progressiveLoadingIndicator","progressiveLoadingMessage","role","refCallback"];function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,h.default)(this,i)}}var T=p.default.bind(b.default),B={ariaLabel:f.default.string,children:f.default.node,dividerStyle:f.default.oneOf(["none","standard","bottom-only"]),initialLoadingIndicator:f.default.element,intl:f.default.shape({formatMessage:f.default.func}),isFinishedLoading:f.default.bool,onRequestItems:f.default.func,paddingStyle:f.default.oneOf(["none","standard","compact"]),progressiveLoadingIndicator:f.default.element,progressiveLoadingMessage:f.default.string,role:f.default.string,refCallback:f.default.func},H={children:[],dividerStyle:"none",isFinishedLoading:!1,paddingStyle:"none",progressiveLoadingMessage:void 0,role:"none"},k=function(e,t){return c.default.createElement("div",{className:T(["spacer"]),style:{height:e},key:"infinite-spacer-".concat(t)})},L=function(e){(0,l.default)(i,e);var t=x(i);function i(e){var n;return(0,a.default)(this,i),(n=t.call(this,e)).update=n.update.bind((0,r.default)(n)),n.resetCache=n.resetCache.bind((0,r.default)(n)),n.setContentNode=n.setContentNode.bind((0,r.default)(n)),n.updateItemCache=n.updateItemCache.bind((0,r.default)(n)),n.initializeItemCache=n.initializeItemCache.bind((0,r.default)(n)),n.updateScrollGroups=n.updateScrollGroups.bind((0,r.default)(n)),n.handleRenderCompletion=n.handleRenderCompletion.bind((0,r.default)(n)),n.handleResize=n.resizeDebounce(n.handleResize.bind((0,r.default)(n))),n.resetTimeout=n.resetTimeout.bind((0,r.default)(n)),n.wrapChild=n.wrapChild.bind((0,r.default)(n)),n.ariaLiveStatus="",n.updateAriaLiveLoadingStatus=n.updateAriaLiveLoadingStatus.bind((0,r.default)(n)),n.resetCache(),n.initializeItemCache(e),n}return(0,d.default)(i,[{key:"componentDidMount",value:function(){var e=this;this.contentNode&&(this.resizeObserver=new m.default((function(t){e.content=t[0].contentRect,e.isCalculating||(e.animationFrameID=window.requestAnimationFrame((function(){e.resetCache(),e.forceUpdate()})))})),this.handleResize(this.content),this.resizeObserver.observe(this.contentNode)),this.contentNode.addEventListener("scroll",this.update),this.updateScrollGroups(),this.handleRenderCompletion()}},{key:"shouldComponentUpdate",value:function(e){var t=c.default.Children.count(e.children);return t>this.childCount?(this.lastChildIndex=this.childCount,this.loadingIndex+=1,this.updateItemCache(e)):t<this.childCount?this.initializeItemCache(e):this.childrenArray=c.default.Children.toArray(e.children),!0}},{key:"componentDidUpdate",value:function(){this.isCalculating&&(this.isCalculating=!1,this.handleResize(this.content)),this.handleRenderCompletion()}},{key:"componentWillUnmount",value:function(){this.contentNode&&(clearTimeout(this.timer),window.cancelAnimationFrame(this.animationFrameID),this.resizeObserver.disconnect(this.contentNode),this.contentNode.removeEventListener("scroll",this.update),this.content=null)}},{key:"handleRenderCompletion",value:function(){this.renderNewChildren=!1,this.preventUpdate=!1,this.lastChildIndex=this.childCount,this.isRenderingNew?(this.isRenderingNew=!1,this.update(null,!1,!0)):this.contentNode&&I.default.shouldTriggerItemRequest(I.default.getContentData(this.contentNode))&&this.triggerItemRequest()}},{key:"handleResize",value:function(){this.scrollHeight===this.contentNode.scrollHeight&&this.clientHeight===this.contentNode.clientHeight||this.adjustHeight(),this.forceUpdate()}},{key:"setContentNode",value:function(e){var t=!this.contentNode;this.contentNode=e,this.contentNode&&t&&this.updateScrollGroups()}},{key:"triggerItemRequest",value:function(){this.props.isFinishedLoading||this.hasRequestedItems||this.isRenderingNew||!this.props.onRequestItems||(this.hasRequestedItems=!0,this.props.onRequestItems(),this.updateAriaLiveLoadingStatus())}},{key:"updateAriaLiveLoadingStatus",value:function(){var e=this;this.ariaLiveStatus=this.props.progressiveLoadingMessage?this.props.progressiveLoadingMessage:this.props.intl.formatMessage({id:"Terra.InfiniteList.loading"}),setTimeout((function(){e.ariaLiveStatus=""}),1e3)}},{key:"updateItemCache",value:function(e){this.childCount=c.default.Children.count(e.children),this.childrenArray=c.default.Children.toArray(e.children),this.hasRequestedItems=!1,this.renderNewChildren=!0}},{key:"initializeItemCache",value:function(e){this.loadingIndex=0,this.lastChildIndex=-1,this.itemsByIndex=[],this.scrollGroups=[],this.boundary={topBoundryIndex:-1,hiddenTopHeight:-1,bottomBoundryIndex:-1,hiddenBottomHeight:-1},this.updateItemCache(e)}},{key:"resetTimeout",value:function(e,t,i,n){var o=this;clearTimeout(this.timer),this.timer=setTimeout((function(){o.last=n,o.disableScroll=!1,e.apply(i,t)}),250)}},{key:"resizeDebounce",value:function(e){var t=this;return function(){for(var i=t,n=performance.now(),o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];t.last&&n<t.last+250||(t.last=n,t.disableScroll=!0),t.resetTimeout(e,s,i,n)}}},{key:"resetCache",value:function(){this.animationFrameID=null,this.isCalculating=!0}},{key:"update",value:function(e,t,i){if(this.contentNode&&!this.disableScroll&&!this.preventUpdate){var n=I.default.getContentData(this.contentNode),o=I.default.getHiddenItems(this.scrollGroups,n,this.boundary.topBoundryIndex,this.boundary.bottomBoundryIndex);this.scrollHeight=n.scrollHeight,this.clientHeight=n.clientHeight,(t||o.topHiddenItem.index!==this.boundary.topBoundryIndex||o.bottomHiddenItem.index!==this.boundary.bottomBoundryIndex)&&(this.preventUpdate=!0,this.boundary={topBoundryIndex:o.topHiddenItem.index,hiddenTopHeight:o.topHiddenItem.height,bottomBoundryIndex:o.bottomHiddenItem.index,hiddenBottomHeight:o.bottomHiddenItem.height},this.forceUpdate()),!i&&I.default.shouldTriggerItemRequest(n)&&this.triggerItemRequest()}}},{key:"updateScrollGroups",value:function(){if(this.contentNode){var e=0,t=0,i=!0,n=1*this.contentNode.clientHeight;this.scrollGroups=[];for(var o=0;o<this.itemsByIndex.length;o+=1){var s=this.itemsByIndex[o];this.scrollGroups[t]&&s.height>=n&&(e=0,t+=1,i=!0),e+=s.height,this.scrollGroups[t]=this.scrollGroups[t]||{items:[]},this.scrollGroups[t].items.push(o),this.scrollGroups[t].height=e,this.itemsByIndex[o].groupIndex=t,i&&(this.scrollGroups[t].offsetTop=this.itemsByIndex[o].offsetTop,i=!1),e>=n&&(e=0,t+=1,i=!0)}}}},{key:"updateHeight",value:function(e,t){if(e){this.itemsByIndex[t]=this.itemsByIndex[t]||{};var i=!1,n=e.getBoundingClientRect().height;(!this.itemsByIndex[t].height||Math.abs(this.itemsByIndex[t].height-n)>1)&&(this.itemsByIndex[t].height=n,i=!0),(!this.itemsByIndex[t].offsetTop||Math.abs(this.itemsByIndex[t].offsetTop-e.offsetTop)>1)&&(this.itemsByIndex[t].offsetTop=e.offsetTop),this.itemsByIndex.length===this.childCount&&(this.scrollGroups.length?i&&this.adjustHeight():this.updateScrollGroups())}}},{key:"adjustHeight",value:function(){var e=this;this.contentNode&&(this.itemsByIndex.forEach((function(t,i){var n=e.contentNode.querySelector('[data-infinite-list-index="'.concat(i,'"]'));if(n){var o=n.getBoundingClientRect().height;(!e.itemsByIndex[i].height||Math.abs(o-e.itemsByIndex[i].height)>1)&&(e.itemsByIndex[i].height=o),(!e.itemsByIndex[i].offsetTop||Math.abs(e.itemsByIndex[i].offsetTop-n.offsetTop)>1)&&(e.itemsByIndex[i].offsetTop=n.offsetTop),e.adjustTrailingItems(i)}})),this.updateScrollGroups(),this.boundary={topBoundryIndex:-1,hiddenTopHeight:-1,bottomBoundryIndex:-1,hiddenBottomHeight:-1},this.update(null,!0))}},{key:"adjustTrailingItems",value:function(e){for(var t=this.itemsByIndex[e].offsetTop,i=this.itemsByIndex[e].height,n=e+1;n<this.itemsByIndex.length;n+=1)t+=i,i=this.itemsByIndex[n].height,this.itemsByIndex[n].offsetTop=t}},{key:"wrapChild",value:function(e,t){var i=this,n={refCallback:function(n){i.updateHeight(n,t),e.props.refCallback&&e.props.refCallback(n)},"data-infinite-list-index":t};return c.default.cloneElement(e,n)}},{key:"render",value:function(){var e,t,i=this.props,n=i.ariaLabel,a=(i.children,i.dividerStyle),d=i.initialLoadingIndicator,r=(i.intl,i.isFinishedLoading),l=(i.onRequestItems,i.paddingStyle),h=i.progressiveLoadingIndicator,u=(i.progressiveLoadingMessage,i.role),f=i.refCallback,p=(0,s.default)(i,C),g=k("".concat(this.boundary.hiddenTopHeight>0?this.boundary.hiddenTopHeight:0,"px"),0),m=k("".concat(this.boundary.hiddenBottomHeight>0?this.boundary.hiddenBottomHeight:0,"px"),1);r||(this.childCount>0?e=c.default.createElement("div",{className:T("spacer"),key:"infinite-spinner-row-".concat(this.loadingIndex)},h):t=c.default.createElement("div",{className:T("spacer"),key:"infinite-spinner-full",style:{height:"100%"}},d));var b,x,B={dividerStyle:a,paddingStyle:l};if(u&&u.length>0&&"none"!==u&&(B.role=u),!t){var H=this.lastChildIndex;!this.scrollGroups.length&&this.lastChildIndex<=0||!this.renderNewChildren?H=this.childCount:(b=c.default.createElement(v.default,(0,o.default)({},B,{className:T(["infinite-hidden"])}),I.default.getNewChildren(this.lastChildIndex,this.childrenArray,this.wrapChild)),this.isRenderingNew=!0),x=I.default.getVisibleChildren(this.scrollGroups,this.childrenArray,this.boundary.topBoundryIndex,this.boundary.bottomBoundryIndex,this.wrapChild,H)}return c.default.createElement(c.default.Fragment,null,c.default.createElement("div",(0,o.default)({},p,{className:T(["infinite-list",p.className]),ref:this.setContentNode}),t,g,c.default.createElement(v.default,(0,o.default)({},B,{"aria-label":n,refCallback:f}),x),m,e),b,c.default.createElement(y.default,{"aria-atomic":"true","aria-live":"assertive",text:this.ariaLiveStatus}))}}]),i}(c.default.Component);L.propTypes=B,L.defaultProps=H;var N=(0,g.injectIntl)(L);t.default=N},91709:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={getHiddenItems:function(e,t,i,n){if(!e||!e.length)return{topHiddenItem:{index:-1,height:-1},bottomHiddenItem:{index:-1,height:-1}};var o,s,a=t.validTop,d=t.validBottom;if(a>0){var r=i;r<0&&(r=0);var l=e[r];o=l.offsetTop+l.height<=a?function(e,t,i){for(var n={index:-1,height:-1},o=t;o<e.length;o+=1){var s=e[o];if(!(s.offsetTop+s.height<=i))break;n.index=o,n.height=s.offsetTop+s.height}return n}(e,r,a):function(e,t,i){for(var n={index:-1,height:-1},o=t;o>=0;o-=1){var s=e[o];if(s.offsetTop+s.height<=i){n.index=o,n.height=s.offsetTop+s.height;break}}return n}(e,r,a)}else o={index:-1,height:-1};var h=n;return h<0&&(h=0),s=e[h].offsetTop>=d?function(e,t,i){for(var n={index:-1,height:-1},o=e[e.length-1],s=t;s>=0;s-=1){var a=e[s];if(!(a.offsetTop>=i))break;n.index=s,n.height=o.offsetTop+o.height-a.offsetTop}return n}(e,h,d):function(e,t,i){for(var n={index:-1,height:-1},o=e[e.length-1],s=t;s<e.length;s+=1){var a=e[s];if(a.offsetTop>=i){n.index=s,n.height=o.offsetTop+o.height-a.offsetTop;break}}return n}(e,h,d),{topHiddenItem:o,bottomHiddenItem:s}},getContentData:function(e){var t=e.scrollTop,i=e.scrollHeight,n=e.clientHeight;return{scrollTop:t,scrollHeight:i,clientHeight:n,validTop:t-.5*n,validBottom:t+1.5*n}},getNewChildren:function(e,t,i){for(var n=[],o=e;o<t.length;o+=1)n.push(i(t[o],o,!0));return n},getVisibleChildren:function(e,t,i,n,o,s){if(!t.length)return null;var a=!1,d=i;d<0&&(d=-1,a=!0);var r=!1,l=n;l<0&&(l=e.length,r=!0);var h=[];if(!a||!r){for(var u=d+1;u<l;u+=1)for(var c=e[u].items,f=c.length,p=0;p<f;p+=1){var g=c[p];h.push(o(t[g],g,!0))}return h}for(var m=0;m<s;m+=1)h.push(o(t[m],m,!0));return h},shouldTriggerItemRequest:function(e){return e.scrollHeight-(e.scrollTop+e.clientHeight)<e.clientHeight}};t.default=i},45186:function(e,t,i){var n=i(64836);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Item",{enumerable:!0,get:function(){return o.Item}}),Object.defineProperty(t,"SectionHeader",{enumerable:!0,get:function(){return o.SectionHeader}}),Object.defineProperty(t,"SubsectionHeader",{enumerable:!0,get:function(){return o.SubsectionHeader}}),t.default=void 0;var o=i(93670),s=n(i(58833)).default;t.default=s},13655:function(e,t,i){i.r(t),t.default={"infinite-list":"InfiniteList-module__infinite-list___7fyNb","infinite-hidden":"InfiniteList-module__infinite-hidden___aTAai","full-loading":"InfiniteList-module__full-loading___ZrKv4",loading:"InfiniteList-module__loading___Aj3yQ",spacer:"InfiniteList-module__spacer___DCsZK"}}}]);