"use strict";(self.webpackChunkterra_framework=self.webpackChunkterra_framework||[]).push([[55730],{85630:function(e,t,r){var n=r(64836),a=r(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ColumnHighlightColor=void 0;var l=n(r(861)),o=n(r(38416)),u=n(r(27424)),i=g(r(67294)),c=n(r(45697)),d=r(25387),s=n(r(19845)),f=g(r(51051)),m=n(r(29270)),w=r(12810),b=n(r(99722)),h=n(r(56323));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=l?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=s.default.bind(h.default),y=(t.ColumnHighlightColor={ORANGE:"orange",GREEN:"green"},{ariaLabelledBy:c.default.string,ariaLabel:c.default.string,id:c.default.string.isRequired,rows:c.default.arrayOf(w.rowShape),sections:c.default.arrayOf(w.sectionShape),columns:c.default.arrayOf(w.columnShape),defaultColumnWidth:c.default.number,columnHeaderHeight:c.default.string,rowHeight:c.default.string,rowMinimumHeight:c.default.string,onCellSelect:c.default.func,onSectionSelect:c.default.func,onClearSelectedCells:c.default.func,onCellRangeSelect:c.default.func,onRowSelect:c.default.func,intl:c.default.shape({formatMessage:c.default.func}).isRequired,hasVisibleColumnHeaders:c.default.bool});function O(e){var t=e.id,r=e.ariaLabelledBy,n=e.ariaLabel,a=e.rows,o=e.sections,c=e.columns,d=e.defaultColumnWidth,s=e.columnHeaderHeight,w=e.rowHeight,h=e.onCellSelect,p=e.onSectionSelect,g=e.onClearSelectedCells,C=e.onCellRangeSelect,y=e.onRowSelect,O=e.intl,I=e.hasVisibleColumnHeaders,M=e.rowMinimumHeight,R=(0,i.useRef)(null),E=(0,i.useRef)([]),H=(0,i.useState)(null),P=(0,u.default)(H,2),_=P[0],j=P[1],k=(0,i.useRef)(!1),D=(0,i.useRef)(),x=(0,i.useMemo)((function(){return c.map((function(e){return v(v({},e),{},{isSelectable:!1,isResizable:!1})}))}),[c]),W=x.length?[x[0]]:[],L=x.length>1?x.slice(1):[],G=function(e){return null===e||""===e||"--"===e},K=(0,i.useMemo)((function(){var e=i.default.createElement(i.default.Fragment,null,i.default.createElement("span",{"aria-hidden":!0},O.formatMessage({id:"Terra.flowsheetDataGrid.no-result-display"})),i.default.createElement(m.default,{text:O.formatMessage({id:"Terra.flowsheetDataGrid.no-result"})})),t=(0,l.default)(a);return t.forEach((function(r,n){var a=(0,l.default)(r.cells);a.forEach((function(t,r){a[r].isSelectable=!0,G(t.content)&&0!==r&&(a[r].content=e)})),t[n].cells=a})),t}),[O,a]),T=(0,i.useMemo)((function(){if(!o)return null;var e=i.default.createElement(i.default.Fragment,null,i.default.createElement("span",{"aria-hidden":!0},O.formatMessage({id:"Terra.flowsheetDataGrid.no-result-display"})),i.default.createElement(m.default,{text:O.formatMessage({id:"Terra.flowsheetDataGrid.no-result"})})),t=(0,l.default)(o);return t.forEach((function(r,n){var a=(0,l.default)(r.rows);a.forEach((function(t,r){var n=(0,l.default)(t.cells);n.forEach((function(t,r){n[r].isSelectable=!1!==t.isSelectable,G(t.content)&&0!==r&&(n[r].content=e)})),a[r].cells=n})),t[n].rows=a})),t}),[O,o]),A=(0,i.useMemo)((function(){return T?T.flatMap((function(e){return e.rows.map((function(t){return v(v({},t),{},{sectionId:e.id})}))})):K}),[T,K]);(0,i.useEffect)((function(){var e=(0,l.default)(E.current),t=[];A.forEach((function(e){e.cells.forEach((function(r,n){r.isSelected&&t.push({rowId:e.id,columnId:c[n].id})}))})),E.current=[].concat(t),E.current.length||(R.current=null),e.length>0&&0===E.current.length?j(O.formatMessage({id:"Terra.flowsheetDataGrid.no-cells-selected"})):E.current.length&&j(O.formatMessage({id:"Terra.flowsheetDataGrid.cells-selected"},{cellCount:E.current.length}))}),[O,A,c,j]);var F=(0,i.useCallback)((function(e,t,r){if(null!==R.current){var n=A.findIndex((function(e){return e.id===R.current.rowId})),a=c.findIndex((function(e){return e.id===R.current.columnId})),l=A.findIndex((function(t){return t.id===e})),o=c.findIndex((function(e){return e.id===t})),u=Math.min(n,l),i=Math.max(n,l),d=Math.min(a,o),s=Math.max(a,o);if(T){var f=T.find((function(e){return e.id===r})),m=A.findIndex((function(e){return e.sectionId===r})),w=m+f.rows.length-1;u=n<=m?m:u,i=n>=w?w:i}for(var b=[],h=u;h<=i;h+=1)for(var p=A[h].id,g=d;g<=s;g+=1){var v=c[g].id;b.push({rowId:p,columnId:v,sectionId:r})}C&&C(b)}}),[A,T,c,C]),Y=(0,i.useCallback)((function(e){0===e.columnIndex?y&&y({rowId:e.rowId,sectionId:e.sectionId,isMetaPressed:e.isMetaPressed}):e.isShiftPressed&&null!==R.current?F(e.rowId,e.columnId,e.sectionId):h&&(R.current={rowId:e.rowId,columnId:e.columnId,sectionId:e.sectionId},h({rowId:e.rowId,columnId:e.columnId,sectionId:e.sectionId,isMetaPressed:e.isMetaPressed}))}),[h,y,F]),B=(0,i.useCallback)((function(e,t,r){if(!(t<=0)||k.current){var n=D.current.getGridRef(),a="";if(T)for(var l=e;l>0;l-=1){var o=n.rows[l].getAttribute("data-section-id");if(o){a=o;break}}k.current||(k.current=!0,null!==R.current||n.rows[e].hasAttribute("data-section-id")||(R.current={rowId:n.rows[e].getAttribute("data-row-id"),columnId:c[t].id,sectionId:a}));var u=e,i=t;switch(r){case f.KEY_UP:u-=1;break;case f.KEY_DOWN:u+=1;break;case f.KEY_LEFT:i-=1;break;case f.KEY_RIGHT:i+=1}u<=0?u=1:u>=n.rows.length&&(u=n.rows.length-1),i<=0?i=1:i>=c.length&&(i=c.length-1);var d=c[i].id,s=n.rows[u].getAttribute("data-row-id");if(!n.rows[u].hasAttribute("data-section-id")){for(var m="",w=u;w>0;w-=1){var b=n.rows[w].getAttribute("data-section-id");if(b){m=b;break}}F(s,d,m)}}}),[T,c,F]);return i.default.createElement("div",{className:S("flowsheet-data-grid-container"),onKeyUp:function(e){if(e.keyCode===f.KEY_SHIFT)k.current&&(k.current=!1,R.current=null)}},i.default.createElement(b.default,{id:t,ariaLabel:n,ariaLabelledBy:r,rows:K,sections:T,rowHeight:w,rowHeaderIndex:0,pinnedColumns:W,overflowColumns:L,defaultColumnWidth:d,columnHeaderHeight:s,onCellSelect:Y,onSectionSelect:p,onClearSelection:g,onCellRangeSelect:B,hasVisibleColumnHeaders:I,ref:D,rowMinimumHeight:M}),i.default.createElement(m.default,{"aria-live":"polite",text:_}))}O.propTypes=y,O.defaultProps={defaultColumnWidth:200,columnHeaderHeight:"2.5rem",rowMinimumHeight:"2.5rem",rows:[],columns:[],hasVisibleColumnHeaders:!0};t.default=(0,d.injectIntl)(O)},51415:function(e,t,r){var n=r(64836),a=r(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(r(38416)),o=b(r(67294)),u=n(r(45697)),i=n(r(19845)),c=b(r(51051)),d=r(12810),s=n(r(29877)),f=n(r(99722)),m=n(r(86843));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=l?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=i.default.bind(s.default),C={ariaLabelledBy:u.default.string,ariaLabel:u.default.string,id:u.default.string.isRequired,rows:u.default.arrayOf(d.rowShape),pinnedColumns:u.default.arrayOf(d.columnShape),overflowColumns:u.default.arrayOf(d.columnShape),defaultColumnWidth:u.default.number,columnHeaderHeight:u.default.string,rowHeight:u.default.string,rowHeaderIndex:d.validateRowHeaderIndex,onColumnResize:u.default.func,onCellSelect:u.default.func,onRowSelect:u.default.func,onRowSelectAll:u.default.func,onColumnSelect:u.default.func,onClearSelectedRows:u.default.func,onClearSelectedCells:u.default.func,onDisableSelectableRows:u.default.func,onEnableRowSelection:u.default.func,hasSelectableRows:u.default.bool};function v(e){var t,r=e.id,n=e.ariaLabelledBy,a=e.ariaLabel,l=e.rows,u=e.pinnedColumns,i=e.overflowColumns,d=e.onColumnResize,s=e.defaultColumnWidth,w=e.columnHeaderHeight,b=e.rowHeight,h=e.onColumnSelect,C=e.onCellSelect,v=e.onRowSelect,S=e.onRowSelectAll,y=e.onClearSelectedRows,O=e.onClearSelectedCells,I=e.onDisableSelectableRows,M=e.onEnableRowSelection,R=e.hasSelectableRows,E=e.rowHeaderIndex,H=(0,o.useRef)(!1),P=(0,o.useRef)({start:null,end:null}),_=(0,o.useRef)(),j=(0,o.useRef)(!1),k=null===(t=document.getElementById("".concat(r,"-worklist-data-grid-container")))||void 0===t?void 0:t.contains(document.activeElement),D=function(e){return e.map((function(e){return p(p({},e),{},{isResizable:!1!==e.isResizable,isSelectable:!1!==e.isSelectable})}))},x=(0,o.useMemo)((function(){return D(u)}),[u]),W=(0,o.useMemo)((function(){return D(i)}),[i]);(0,o.useEffect)((function(){if(R||(P.current={}),j.current){var e=_.current.getFocusedCell();e={row:e.row,col:Math.max(e.col+(R?1:-1),0)},_.current.setFocusedRowCol(e.row,e.col,k)}}),[R]);var L=(0,o.useCallback)((function(){R?(P.current={},l.some((function(e){return e.isSelected}))?y&&y():I&&I()):O&&O()}),[R,O,y,I,l]),G=(0,o.useCallback)((function(e){var t=[];return P.current.end?(P.current.start>P.current.end?e>P.current.end&&(t=l.slice(P.current.end-1,Math.min(e,P.current.start)-1).map((function(e){return{id:e.id,selected:!1}}))):P.current.start<P.current.end&&e<P.current.end&&(t=l.slice(Math.max(P.current.start,e),P.current.end).map((function(e){return{id:e.id,selected:!1}}))),t):t}),[l]),K=(0,o.useCallback)((function(e){if(R||M(),v){var t=Math.min(P.current.start,e),r=Math.max(P.current.start,e),n=l.slice(t-1,r).map((function(e){return{id:e.id,selected:!0}}));n=n.concat(G(e)),v(n),P.current.end=e}}),[R,M,v,l,G]),T=(0,o.useCallback)((function(e,t){var r=[];l[t-1].isSelected?(t===P.current.start&&(P.current={}),r.push({id:e,selected:!1})):(P.current={start:t,end:null},r.push({id:e,selected:!0})),v&&v(r)}),[v,l]),A=(0,o.useCallback)((function(e,t,r){var n=e;r===c.KEY_UP?0===(n-=1)&&(n=1):r===c.KEY_DOWN&&(n+=1),H.current||(H.current=!0,P.current={start:e,end:null}),K(n)}),[K]),F=(0,o.useCallback)((function(e){R?e.isShiftPressed&&P.current.start?K(e.rowIndex):T(e.rowId,e.rowIndex):e.isShiftPressed&&(P.current={start:e.rowIndex,end:null},K(e.rowIndex))}),[R,K,T]),Y=(0,o.useCallback)((function(e){R||e.isShiftPressed?F(e):e.isCellSelectable&&C&&C(e.rowId,e.columnId)}),[F,R,C]),B=(0,o.useCallback)((function(){h(m.default.ROW_SELECTION_COLUMN.id)}),[h]);return o.default.createElement("div",{id:"".concat(r,"-worklist-data-grid-container"),onKeyDown:function(e){if(e.keyCode===c.KEY_A)R&&(e.ctrlKey||e.metaKey)&&(S&&S(),e.preventDefault())},onKeyUp:function(e){if(e.keyCode===c.KEY_SHIFT)H.current=!1},className:g("worklist-data-grid-container"),onFocus:j.current?void 0:function(){j.current=!0}},o.default.createElement(f.default,{id:r,ariaLabel:a,ariaLabelledBy:n,rows:l,rowHeight:b,rowHeaderIndex:E,pinnedColumns:x,overflowColumns:W,defaultColumnWidth:s,columnHeaderHeight:w,onColumnSelect:h,onRowSelectionHeaderSelect:h?B:void 0,onColumnResize:d,onCellSelect:Y,onClearSelection:L,onRangeSelection:A,hasSelectableRows:R,ref:_}))}v.propTypes=C,v.defaultProps={rowHeaderIndex:0,defaultColumnWidth:200,columnHeaderHeight:"2.5rem",rowHeight:"2.5rem",pinnedColumns:[],overflowColumns:[],rows:[]};t.default=v},55730:function(e,t,r){var n=r(64836);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"FlowsheetDataGrid",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"WorklistDataGrid",{enumerable:!0,get:function(){return a.default}});var a=n(r(51415)),l=n(r(85630))},56323:function(e,t,r){r.r(t),t.default={"flowsheet-data-grid-container":"FlowsheetDataGrid-module__flowsheet-data-grid-container___O1y8B"}},29877:function(e,t,r){r.r(t),t.default={"worklist-data-grid-container":"WorklistDataGrid-module__worklist-data-grid-container___IbMs4"}}}]);