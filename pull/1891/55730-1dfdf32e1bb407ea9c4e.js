"use strict";(self.webpackChunkterra_framework=self.webpackChunkterra_framework||[]).push([[55730],{85630:function(e,t,r){var n=r(64836),l=r(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(861)),u=n(r(38416)),o=n(r(27424)),c=C(r(67294)),i=n(r(45697)),d=r(25387),f=n(r(47166)),s=C(r(51051)),b=n(r(29270)),m=n(r(99722)),p=n(r(99254)),w=r(28409),h=n(r(56323));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=f.default.bind(h.default),S={ariaLabelledBy:i.default.string,ariaLabel:i.default.string,id:i.default.string.isRequired,rows:i.default.arrayOf(p.default),columns:i.default.arrayOf(w.columnShape),defaultColumnWidth:i.default.number,columnHeaderHeight:i.default.string,rowHeight:i.default.string,onCellSelect:i.default.func,onClearSelectedCells:i.default.func,onCellRangeSelect:i.default.func,intl:i.default.shape({formatMessage:i.default.func}).isRequired,hasVisibleColumnHeaders:i.default.bool};function _(e){var t=e.id,r=e.ariaLabelledBy,n=e.ariaLabel,l=e.rows,u=e.columns,i=e.defaultColumnWidth,d=e.columnHeaderHeight,f=e.rowHeight,p=e.onCellSelect,w=e.onClearSelectedCells,h=e.onCellRangeSelect,g=e.intl,C=e.hasVisibleColumnHeaders,y=(0,c.useRef)(null),S=(0,c.useRef)([]),_=(0,c.useState)(null),j=(0,o.default)(_,2),k=j[0],P=j[1],I=(0,c.useRef)(!1),H=(0,c.useMemo)((function(){return u.map((function(e){return O(O({},e),{},{isSelectable:!1!==e.isSelectable,isResizable:!1})}))}),[u]),R=H.length?[H[0]]:[],E=H.length>1?H.slice(1):[],M=(0,c.useMemo)((function(){var e=c.default.createElement(c.default.Fragment,null,c.default.createElement("span",{"aria-hidden":!0},g.formatMessage({id:"Terra.flowsheetDataGrid.no-result-display"})),c.default.createElement(b.default,{text:g.formatMessage({id:"Terra.flowsheetDataGrid.no-result"})})),t=(0,a.default)(l);return t.forEach((function(r,n){var l=(0,a.default)(r.cells);l.forEach((function(t,r){var n;l[r].isSelectable=!1!==t.isSelectable,null!==(n=t.content)&&""!==n&&"--"!==n||0===r||(l[r].content=e)})),t[n].cells=l})),t}),[g,l]);(0,c.useEffect)((function(){var e=(0,a.default)(S.current),t=[];l.forEach((function(e){e.cells.forEach((function(r,n){r.isSelected&&t.push({rowId:e.id,columnId:u[n].id})}))})),S.current=[].concat(t),S.current.length||(y.current=null),e.length>0&&0===S.current.length?P(g.formatMessage({id:"Terra.flowsheetDataGrid.no-cells-selected"})):S.current.length&&P(g.formatMessage({id:"Terra.flowsheetDataGrid.cells-selected"},{cellCount:S.current.length}))}),[g,l,u,P]);var D=(0,c.useCallback)((function(){w&&w()}),[w]),x=(0,c.useCallback)((function(e,t){for(var r=l.findIndex((function(e){return e.id===y.current.rowId})),n=u.findIndex((function(e){return e.id===y.current.columnId})),a=Math.min(r,e-1),o=Math.max(r,e-1),c=Math.min(n,t),i=Math.max(n,t),d=[],f=a;f<=o;f+=1)for(var s=l[f].id,b=c;b<=i;b+=1){var m=u[b].id;d.push({rowId:s,columnId:m})}h&&h(d)}),[l,u,h]),W=(0,c.useCallback)((function(e){e.isCellSelectable&&0!==e.columnIndex&&(e.isShiftPressed&&null!==y.current?x(e.rowIndex,e.columnIndex):p&&(y.current={rowId:e.rowId,columnId:e.columnId},p(e.rowId,e.columnId)))}),[p,x]),L=(0,c.useCallback)((function(e,t,r){if(!(t<=0)||I.current){I.current||(I.current=!0,null===y.current&&(y.current={rowId:l[e-1].id,columnId:u[t].id}));var n=e,a=t;switch(r){case s.KEY_UP:n-=1;break;case s.KEY_DOWN:n+=1;break;case s.KEY_LEFT:a-=1;break;case s.KEY_RIGHT:a+=1}n<=0?n=1:n>l.length&&(n=l.length),a<=0?a=1:a>=u.length&&(a=u.length-1),x(n,a)}}),[l,u,x]);return c.default.createElement("div",{className:v("flowsheet-data-grid-container"),onKeyUp:function(e){if(e.keyCode===s.KEY_SHIFT)I.current&&(I.current=!1,y.current=null)}},c.default.createElement(m.default,{id:t,ariaLabel:n,ariaLabelledBy:r,rows:M,rowHeight:f,rowHeaderIndex:0,pinnedColumns:R,overflowColumns:E,defaultColumnWidth:i,columnHeaderHeight:d,onCellSelect:W,onClearSelection:D,onCellRangeSelect:L,hasVisibleColumnHeaders:C}),c.default.createElement(b.default,{"aria-live":"polite",text:k}))}_.propTypes=S,_.defaultProps={defaultColumnWidth:200,columnHeaderHeight:"2.5rem",rowHeight:"2.5rem",rows:[],columns:[],hasVisibleColumnHeaders:!0};t.default=(0,d.injectIntl)(_)},51415:function(e,t,r){var n=r(64836),l=r(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(38416)),u=h(r(67294)),o=n(r(45697)),c=n(r(47166)),i=h(r(51051)),d=n(r(99254)),f=r(28409),s=n(r(98834)),b=n(r(29877)),m=n(r(99722)),p=n(r(86843));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=c.default.bind(b.default),O={ariaLabelledBy:o.default.string,ariaLabel:o.default.string,id:o.default.string.isRequired,rows:o.default.arrayOf(d.default),pinnedColumns:o.default.arrayOf(f.columnShape),overflowColumns:o.default.arrayOf(f.columnShape),defaultColumnWidth:o.default.number,columnHeaderHeight:o.default.string,rowHeight:o.default.string,rowHeaderIndex:s.default,onColumnResize:o.default.func,onCellSelect:o.default.func,onRowSelect:o.default.func,onRowSelectAll:o.default.func,onColumnSelect:o.default.func,onClearSelectedRows:o.default.func,onClearSelectedCells:o.default.func,onDisableSelectableRows:o.default.func,onEnableRowSelection:o.default.func,hasSelectableRows:o.default.bool};function v(e){var t,r=e.id,n=e.ariaLabelledBy,l=e.ariaLabel,a=e.rows,o=e.pinnedColumns,c=e.overflowColumns,d=e.onColumnResize,f=e.defaultColumnWidth,s=e.columnHeaderHeight,b=e.rowHeight,w=e.onColumnSelect,h=e.onCellSelect,g=e.onRowSelect,O=e.onRowSelectAll,v=e.onClearSelectedRows,S=e.onClearSelectedCells,_=e.onDisableSelectableRows,j=e.onEnableRowSelection,k=e.hasSelectableRows,P=e.rowHeaderIndex,I=(0,u.useRef)(!1),H=(0,u.useRef)({start:null,end:null}),R=(0,u.useRef)(),E=(0,u.useRef)(!1),M=null===(t=document.getElementById("".concat(r,"-worklist-data-grid-container")))||void 0===t?void 0:t.contains(document.activeElement),D=function(e){return e.map((function(e){return C(C({},e),{},{isResizable:!1!==e.isResizable,isSelectable:!1!==e.isSelectable})}))},x=D(o),W=D(c);(0,u.useEffect)((function(){if(k||(H.current={}),E.current){var e=R.current.getFocusedCell();e={row:e.row,col:Math.max(e.col+(k?1:-1),0)},R.current.setFocusedRowCol(e.row,e.col,M)}}),[k]);var L=(0,u.useCallback)((function(){k?(H.current={},a.some((function(e){return e.isSelected}))?v&&v():_&&_()):S&&S()}),[k,S,v,_,a]),K=(0,u.useCallback)((function(e){var t=[];return H.current.end?(H.current.start>H.current.end?e>H.current.end&&(t=a.slice(H.current.end-1,Math.min(e,H.current.start)-1).map((function(e){return{id:e.id,selected:!1}}))):H.current.start<H.current.end&&e<H.current.end&&(t=a.slice(Math.max(H.current.start,e),H.current.end).map((function(e){return{id:e.id,selected:!1}}))),t):t}),[a]),T=(0,u.useCallback)((function(e){if(k||j(),g){var t=Math.min(H.current.start,e),r=Math.max(H.current.start,e),n=a.slice(t-1,r).map((function(e){return{id:e.id,selected:!0}}));n=n.concat(K(e)),g(n),H.current.end=e}}),[k,j,g,a,K]),F=(0,u.useCallback)((function(e,t){var r=[];a[t-1].isSelected?(t===H.current.start&&(H.current={}),r.push({id:e,selected:!1})):(H.current={start:t,end:null},r.push({id:e,selected:!0})),g&&g(r)}),[g,a]),G=(0,u.useCallback)((function(e,t,r){var n=e;r===i.KEY_UP?0===(n-=1)&&(n=1):r===i.KEY_DOWN&&(n+=1),I.current||(I.current=!0,H.current={start:e,end:null}),T(n)}),[T]),Y=(0,u.useCallback)((function(e){k?e.isShiftPressed&&H.current.start?T(e.rowIndex):F(e.rowId,e.rowIndex):e.isShiftPressed&&(H.current={start:e.rowIndex,end:null},T(e.rowIndex))}),[k,T,F]),B=(0,u.useCallback)((function(e){k||e.isShiftPressed?Y(e):e.isCellSelectable&&h&&h(e.rowId,e.columnId)}),[Y,k,h]),z=(0,u.useCallback)((function(e){w(e)}),[w]),N=(0,u.useCallback)((function(){w(p.default.ROW_SELECTION_COLUMN.id)}),[w]);return u.default.createElement("div",{id:"".concat(r,"-worklist-data-grid-container"),onKeyDown:function(e){if(e.keyCode===i.KEY_A)k&&(e.ctrlKey||e.metaKey)&&(O&&O(),e.preventDefault())},onKeyUp:function(e){if(e.keyCode===i.KEY_SHIFT)I.current=!1},className:y("worklist-data-grid-container"),onFocus:E.current?void 0:function(){E.current=!0}},u.default.createElement(m.default,{id:r,ariaLabel:l,ariaLabelledBy:n,rows:a,rowHeight:b,rowHeaderIndex:P,pinnedColumns:x,overflowColumns:W,defaultColumnWidth:f,columnHeaderHeight:s,onColumnSelect:w?z:void 0,onRowSelectionHeaderSelect:w?N:void 0,onColumnResize:d,onCellSelect:B,onClearSelection:L,onRangeSelection:G,hasSelectableRows:k,ref:R}))}v.propTypes=O,v.defaultProps={rowHeaderIndex:0,defaultColumnWidth:200,columnHeaderHeight:"2.5rem",rowHeight:"2.5rem",pinnedColumns:[],overflowColumns:[],rows:[]};t.default=v},55730:function(e,t,r){var n=r(64836);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"FlowsheetDataGrid",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"WorklistDataGrid",{enumerable:!0,get:function(){return l.default}});var l=n(r(51415)),a=n(r(85630))},56323:function(e,t,r){r.r(t),t.default={"flowsheet-data-grid-container":"FlowsheetDataGrid-module__flowsheet-data-grid-container___O1y8B"}},29877:function(e,t,r){r.r(t),t.default={"worklist-data-grid-container":"WorklistDataGrid-module__worklist-data-grid-container___IbMs4"}}}]);