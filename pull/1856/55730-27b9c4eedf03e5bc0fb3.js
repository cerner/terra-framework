"use strict";(self.webpackChunkterra_framework=self.webpackChunkterra_framework||[]).push([[55730],{85630:function(e,t,r){var n=r(64836),l=r(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(861)),u=n(r(38416)),o=n(r(27424)),c=C(r(67294)),i=n(r(45697)),d=r(25387),f=n(r(47166)),s=C(r(51051)),m=n(r(29270)),w=n(r(99722)),h=n(r(99254)),g=r(28409),p=n(r(56323));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=f.default.bind(p.default),O={ariaLabelledBy:i.default.string,ariaLabel:i.default.string,id:i.default.string.isRequired,rows:i.default.arrayOf(h.default),columns:i.default.arrayOf(g.columnShape),defaultColumnWidth:i.default.number,columnHeaderHeight:i.default.string,rowHeight:i.default.string,onCellSelect:i.default.func,onClearSelectedCells:i.default.func,onCellRangeSelect:i.default.func,intl:i.default.shape({formatMessage:i.default.func}).isRequired};function k(e){var t=e.id,r=e.ariaLabelledBy,n=e.ariaLabel,l=e.rows,u=e.columns,i=e.defaultColumnWidth,d=e.columnHeaderHeight,f=e.rowHeight,h=e.onCellSelect,g=e.onClearSelectedCells,p=e.onCellRangeSelect,b=e.intl,C=(0,c.useRef)(null),v=(0,c.useRef)([]),O=(0,c.useState)(null),k=(0,o.default)(O,2),I=k[0],_=k[1],M=(0,c.useRef)(!1),R=(0,c.useMemo)((function(){return u.map((function(e){return y(y({},e),{},{isResizable:!1})}))}),[u]),E=R.length?[R[0]]:[],H=R.length>1?R.slice(1):[],P=(0,c.useMemo)((function(){var e=c.default.createElement(c.default.Fragment,null,c.default.createElement("span",{"aria-hidden":!0},b.formatMessage({id:"Terra.flowsheetDataGrid.no-result-display"})),c.default.createElement(m.default,{text:b.formatMessage({id:"Terra.flowsheetDataGrid.no-result"})})),t=(0,a.default)(l);return t.forEach((function(r,n){var l=(0,a.default)(r.cells);l.forEach((function(t,r){var n;null!==(n=t.content)&&""!==n&&"--"!==n||0===r||(l[r].content=e)})),t[n].cells=l})),t}),[b,l]);(0,c.useEffect)((function(){var e=(0,a.default)(v.current),t=[];l.forEach((function(e){e.cells.forEach((function(r,n){r.isSelected&&t.push({rowId:e.id,columnId:u[n].id})}))})),v.current=[].concat(t),v.current.length||(C.current=null),e.length>0&&0===v.current.length?_(b.formatMessage({id:"Terra.flowsheetDataGrid.no-cells-selected"})):v.current.length&&_(b.formatMessage({id:"Terra.flowsheetDataGrid.cells-selected"},{cellCount:v.current.length}))}),[b,l,u,_]);var j=(0,c.useCallback)((function(){g&&g()}),[g]),D=(0,c.useCallback)((function(e,t){for(var r=l.findIndex((function(e){return e.id===C.current.rowId})),n=u.findIndex((function(e){return e.id===C.current.columnId})),a=Math.min(r,e-1),o=Math.max(r,e-1),c=Math.min(n,t),i=Math.max(n,t),d=[],f=a;f<=o;f+=1)for(var s=l[f].id,m=c;m<=i;m+=1){var w=u[m].id;d.push({rowId:s,columnId:w})}p&&p(d)}),[l,u,p]),x=(0,c.useCallback)((function(e){e.isCellSelectable&&0!==e.columnIndex&&(e.isShiftPressed&&null!==C.current?D(e.rowIndex,e.columnIndex):h&&(C.current={rowId:e.rowId,columnId:e.columnId},h(e.rowId,e.columnId)))}),[h,D]),T=(0,c.useCallback)((function(e,t,r){if(!(t<=0)||M.current){M.current||(M.current=!0,null===C.current&&(C.current={rowId:l[e-1].id,columnId:u[t].id}));var n=e,a=t;switch(r){case s.KEY_UP:n-=1;break;case s.KEY_DOWN:n+=1;break;case s.KEY_LEFT:a-=1;break;case s.KEY_RIGHT:a+=1}n<=0?n=1:n>l.length&&(n=l.length),a<=0?a=1:a>=u.length&&(a=u.length-1),D(n,a)}}),[l,u,D]);return c.default.createElement("div",{className:S("flowsheet-data-grid-container"),onKeyUp:function(e){if(e.keyCode===s.KEY_SHIFT)M.current&&(M.current=!1,C.current=null)}},c.default.createElement(w.default,{id:t,ariaLabel:n,ariaLabelledBy:r,rows:P,rowHeight:f,rowHeaderIndex:0,pinnedColumns:E,overflowColumns:H,defaultColumnWidth:i,columnHeaderHeight:d,onCellSelect:x,onClearSelection:j,onCellRangeSelect:T}),c.default.createElement(m.default,{"aria-live":"polite",text:I}))}k.propTypes=O,k.defaultProps={defaultColumnWidth:200,columnHeaderHeight:"2.5rem",rowHeight:"2.5rem",rows:[],columns:[]};t.default=(0,d.injectIntl)(k)},51415:function(e,t,r){var n=r(64836),l=r(18698);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(861)),u=n(r(27424)),o=C(r(67294)),c=n(r(45697)),i=r(25387),d=n(r(47166)),f=C(r(51051)),s=n(r(29270)),m=n(r(99254)),w=r(28409),h=n(r(98834)),g=n(r(29877)),p=n(r(99722));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=a?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(n,u,o):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}var v=d.default.bind(g.default),y={ariaLabelledBy:c.default.string,ariaLabel:c.default.string,id:c.default.string.isRequired,rows:c.default.arrayOf(m.default),pinnedColumns:c.default.arrayOf(w.columnShape),overflowColumns:c.default.arrayOf(w.columnShape),defaultColumnWidth:c.default.number,columnHeaderHeight:c.default.string,rowHeight:c.default.string,rowHeaderIndex:h.default,onColumnResize:c.default.func,onCellSelect:c.default.func,onRowSelect:c.default.func,onRowSelectAll:c.default.func,onColumnSelect:c.default.func,onClearSelectedRows:c.default.func,onClearSelectedCells:c.default.func,onDisableSelectableRows:c.default.func,onEnableRowSelection:c.default.func,hasSelectableRows:c.default.bool,intl:c.default.shape({formatMessage:c.default.func}).isRequired};function S(e){var t,r=e.id,n=e.ariaLabelledBy,l=e.ariaLabel,c=e.rows,i=e.pinnedColumns,d=e.overflowColumns,m=e.onColumnResize,w=e.defaultColumnWidth,h=e.columnHeaderHeight,g=e.rowHeight,b=e.onColumnSelect,C=e.onCellSelect,y=e.onRowSelect,S=e.onRowSelectAll,O=e.onClearSelectedRows,k=e.onClearSelectedCells,I=e.onDisableSelectableRows,_=e.onEnableRowSelection,M=e.hasSelectableRows,R=e.intl,E=e.rowHeaderIndex,H=(0,o.useRef)(!1),P=(0,o.useRef)([]),j=(0,o.useState)(null),D=(0,u.default)(j,2),x=D[0],T=D[1],W=(0,o.useState)(null),G=(0,u.default)(W,2),L=G[0],K=G[1],F=(0,o.useRef)(!1),Y=(0,o.useRef)({start:null,end:null}),B=(0,o.useRef)(),q=(0,o.useRef)(!1),z=null===(t=document.getElementById("".concat(r,"-worklist-data-grid-container")))||void 0===t?void 0:t.contains(document.activeElement);(0,o.useEffect)((function(){if(H.current){if(M||(Y.current={},P.current=[]),K(R.formatMessage({id:M?"Terra.worklistDataGrid.row-selection-mode-enabled":"Terra.worklistDataGrid.row-selection-mode-disabled"})),q.current){var e=B.current.getFocusedCell();e={row:e.row,col:Math.max(e.col+(M?1:-1),0)},B.current.setFocusedRowCol(e.row,e.col,z)}}else H.current=!0}),[M]),(0,o.useEffect)((function(){var e=(0,a.default)(P.current);if(P.current=c.filter((function(e){return e.isSelected})).map((function(e){return e.id})),e.length>0&&0===P.current.length)T(R.formatMessage({id:"Terra.worklistDataGrid.all-rows-unselected"}));else if(P.current.length===c.length)T(R.formatMessage({id:"Terra.worklistDataGrid.all-rows-selected"}));else{var t=P.current.filter((function(t){return!e.includes(t)})),r=e.filter((function(e){return!P.current.includes(e)})),n="";if(1===t.length){var l=c.findIndex((function(e){return e.id===t[0]})),u=c[l].ariaLabel||l+2;n=R.formatMessage({id:"Terra.worklistDataGrid.row-selection-template"},{row:u})}else t.length>1&&(n=R.formatMessage({id:"Terra.worklistDataGrid.multiple-rows-selected"},{rowCount:t.length}));if(1===r.length){var o=c.findIndex((function(e){return e.id===r[0]})),i=c[o].ariaLabel||o+2;n+=R.formatMessage({id:"Terra.worklistDataGrid.row-selection-cleared-template"},{row:i})}else r.length>1&&(n+=R.formatMessage({id:"Terra.worklistDataGrid.multiple-rows-unselected"},{rowCount:r.length}));n&&T(n)}}),[R,c]);var N=(0,o.useCallback)((function(){M?(Y.current={},c.some((function(e){return e.isSelected}))?O&&O():I&&I()):k&&k()}),[M,k,O,I,c]),U=(0,o.useCallback)((function(e){var t=[];return Y.current.end?(Y.current.start>Y.current.end?e>Y.current.end&&(t=c.slice(Y.current.end-1,Math.min(e,Y.current.start)-1).map((function(e){return{id:e.id,selected:!1}}))):Y.current.start<Y.current.end&&e<Y.current.end&&(t=c.slice(Math.max(Y.current.start,e),Y.current.end).map((function(e){return{id:e.id,selected:!1}}))),t):t}),[c]),A=(0,o.useCallback)((function(e){if(M||_(),y){var t=Math.min(Y.current.start,e),r=Math.max(Y.current.start,e),n=c.slice(t-1,r).map((function(e){return{id:e.id,selected:!0}}));n=n.concat(U(e)),y(n),Y.current.end=e}}),[M,_,y,c,U]),J=(0,o.useCallback)((function(e,t){var r=[];c[t-1].isSelected?(t===Y.current.start&&(Y.current={}),r.push({id:e,selected:!1})):(Y.current={start:t,end:null},r.push({id:e,selected:!0})),y&&y(r)}),[y,c]),Q=(0,o.useCallback)((function(e,t,r){var n=e;r===f.KEY_UP?0===(n-=1)&&(n=1):r===f.KEY_DOWN&&(n+=1),F.current||(F.current=!0,Y.current={start:e,end:null}),A(n)}),[A]),V=(0,o.useCallback)((function(e){M?e.isShiftPressed&&Y.current.start?A(e.rowIndex):J(e.rowId,e.rowIndex):e.isShiftPressed&&(Y.current={start:e.rowIndex,end:null},A(e.rowIndex))}),[M,A,J]),X=(0,o.useCallback)((function(e){M||e.isShiftPressed?V(e):e.isCellSelectable&&C&&C(e.rowId,e.columnId)}),[V,M,C]);return o.default.createElement("div",{id:"".concat(r,"-worklist-data-grid-container"),onKeyDown:function(e){if(e.keyCode===f.KEY_A)M&&(e.ctrlKey||e.metaKey)&&(S&&S(),e.preventDefault())},onKeyUp:function(e){if(e.keyCode===f.KEY_SHIFT)F.current=!1},className:v("worklist-data-grid-container"),onFocus:q.current?void 0:function(){q.current=!0}},o.default.createElement(p.default,{id:r,ariaLabel:l,ariaLabelledBy:n,rows:c,rowHeight:g,rowHeaderIndex:E,pinnedColumns:i,overflowColumns:d,defaultColumnWidth:w,columnHeaderHeight:h,onColumnSelect:b,onColumnResize:m,onCellSelect:X,onClearSelection:N,onRangeSelection:Q,hasSelectableRows:M,ref:B}),o.default.createElement(s.default,{"aria-live":"polite",text:L}),o.default.createElement(s.default,{"aria-live":"polite",text:x}))}S.propTypes=y,S.defaultProps={rowHeaderIndex:0,defaultColumnWidth:200,columnHeaderHeight:"2.5rem",rowHeight:"2.5rem",pinnedColumns:[],overflowColumns:[],rows:[]};t.default=(0,i.injectIntl)(S)},55730:function(e,t,r){var n=r(64836);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"FlowsheetDataGrid",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"WorklistDataGrid",{enumerable:!0,get:function(){return l.default}});var l=n(r(51415)),a=n(r(85630))},56323:function(e,t,r){r.r(t),t.default={"flowsheet-data-grid-container":"FlowsheetDataGrid-module__flowsheet-data-grid-container___O1y8B"}},29877:function(e,t,r){r.r(t),t.default={"worklist-data-grid-container":"WorklistDataGrid-module__worklist-data-grid-container___IbMs4"}}}]);