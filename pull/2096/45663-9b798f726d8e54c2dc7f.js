"use strict";(self.webpackChunkterra_framework=self.webpackChunkterra_framework||[]).push([[45663],{6432:function(e,t,n){var r=n(24994),l=n(73738);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ColumnHighlightColor",{enumerable:!0,get:function(){return w.ColumnHighlightColor}}),t.default=void 0;var a=r(n(41132)),o=r(n(43693)),u=r(n(85715)),c=g(n(96540)),i=r(n(5556)),d=n(8604),s=r(n(67967)),f=g(n(25966)),m=r(n(16524)),b=n(83264),w=g(n(62227)),p=r(n(3321));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=s.default.bind(p.default),y={ariaLabelledBy:i.default.string,ariaLabel:i.default.string,id:i.default.string.isRequired,rows:i.default.arrayOf(b.rowShape),sections:i.default.arrayOf(b.sectionShape),columns:i.default.arrayOf(b.columnShape),defaultColumnWidth:i.default.number,columnHeaderHeight:i.default.string,rowHeight:i.default.string,rowMinimumHeight:i.default.string,onCellSelect:i.default.func,onSectionSelect:i.default.func,onClearSelectedCells:i.default.func,onCellRangeSelect:i.default.func,onRowSelect:i.default.func,intl:i.default.shape({formatMessage:i.default.func}).isRequired,hasVisibleColumnHeaders:i.default.bool,isAutoFocusEnabled:i.default.bool};function O(e){var t=e.id,n=e.ariaLabelledBy,r=e.ariaLabel,l=e.rows,o=e.sections,i=e.columns,d=e.defaultColumnWidth,s=e.columnHeaderHeight,b=e.rowHeight,p=e.onCellSelect,h=e.onSectionSelect,g=e.onClearSelectedCells,S=e.onCellRangeSelect,y=e.onRowSelect,O=e.intl,I=e.hasVisibleColumnHeaders,P=e.rowMinimumHeight,M=e.isAutoFocusEnabled,E=(0,c.useRef)(null),_=(0,c.useRef)([]),j=(0,c.useState)(null),R=(0,u.default)(j,2),H=R[0],k=R[1],x=(0,c.useRef)(!1),D=(0,c.useRef)(),W=(0,c.useMemo)((function(){return i.map((function(e){return v(v({},e),{},{isSelectable:!1,isResizable:!1})}))}),[i]),F=(0,c.useMemo)((function(){var e=0,t=[];return i.forEach((function(n){if(n.columnSpan>1){t[e]=v(v({},n),{},{columnSpanIndex:0,isSelectable:!1,isSelected:!1,isResizable:!1}),e+=1;for(var r=n.columnSpan;r>1;r-=1)t[e]={id:"".concat(n.id),columnSpanIndex:"".concat(n.columnSpan-r+1),isSelectable:!1,isResizable:!1,isSelected:!1},e+=1}else t[e]=v(v({},n),{},{isSelectable:!1,isSelected:!1,isResizable:!1}),e+=1})),t}),[i]),A=W.length?[W[0]]:[],L=W.length>1?W.slice(1):[],K=function(e){return null===e||""===e||"--"===e},T=(0,c.useMemo)((function(){var e=c.default.createElement(c.default.Fragment,null,c.default.createElement("span",{"aria-hidden":!0},O.formatMessage({id:"Terra.flowsheetDataGrid.no-result-display"})),c.default.createElement(m.default,{text:O.formatMessage({id:"Terra.flowsheetDataGrid.no-result"})})),t=(0,a.default)(l);return t.forEach((function(n,r){var l=(0,a.default)(n.cells);l.forEach((function(t,n){l[n].isSelectable=!0,K(t.content)&&0!==n&&(l[n].content=e)})),t[r].cells=l})),t}),[O,l]),G=(0,c.useMemo)((function(){if(!o)return null;var e=c.default.createElement(c.default.Fragment,null,c.default.createElement("span",{"aria-hidden":!0},O.formatMessage({id:"Terra.flowsheetDataGrid.no-result-display"})),c.default.createElement(m.default,{text:O.formatMessage({id:"Terra.flowsheetDataGrid.no-result"})})),t=(0,a.default)(o);return t.forEach((function(n,r){var l=(0,a.default)(n.rows);l.forEach((function(t,n){var r=(0,a.default)(t.cells);r.forEach((function(t,n){r[n].isSelectable=!1!==t.isSelectable,K(t.content)&&0!==n&&(r[n].content=e)})),l[n].cells=r})),t[r].rows=l})),t}),[O,o]),z=(0,c.useMemo)((function(){return G?G.flatMap((function(e){return e.rows.map((function(t){return v(v({},t),{},{sectionId:e.id})}))})):T}),[G,T]);(0,c.useEffect)((function(){var e=(0,a.default)(_.current),t=[];z.forEach((function(e){e.cells.forEach((function(n,r){n.isSelected&&t.push({rowId:e.id,columnId:F[r].id,columnSpanIndex:F[r].columnSpanIndex})}))})),_.current=[].concat(t),_.current.length||(E.current=null),e.length>0&&0===_.current.length?k(O.formatMessage({id:"Terra.flowsheetDataGrid.no-cells-selected"})):_.current.length&&k(O.formatMessage({id:"Terra.flowsheetDataGrid.cells-selected"},{cellCount:_.current.length}))}),[O,z,F,k]);var Y=(0,c.useCallback)((function(e,t,n,r){if(null!==E.current){var l=z.findIndex((function(e){return e.id===E.current.rowId})),a=E.current.columnIndex,o=z.findIndex((function(t){return t.id===e})),u=Math.min(l,o),c=Math.max(l,o),i=Math.min(a,n),d=Math.max(a,n);if(G){var s=G.find((function(e){return e.id===r})),f=z.findIndex((function(e){return e.sectionId===r})),m=f+s.rows.length-1;u=l<=f?f:u,c=l>=m?m:c}for(var b=[],w=u;w<=c;w+=1)for(var p=z[w].id,h=i;h<=d;h+=1){var g=F[h].id;b.push({rowId:p,columnId:g,columnIndex:h,sectionId:r})}S&&S(b)}}),[z,G,F,S]),B=(0,c.useCallback)((function(e,t){0===e.columnIndex?y&&y({rowId:e.rowId,sectionId:e.sectionId,isMetaPressed:e.isMetaPressed}):e.isShiftPressed&&null!==E.current?Y(e.rowId,e.columnId,e.columnIndex,e.sectionId):p&&(E.current={rowId:e.rowId,columnId:e.columnId,columnIndex:e.columnIndex,sectionId:e.sectionId},p({rowId:e.rowId,columnId:e.columnId,columnIndex:e.columnIndex,sectionId:e.sectionId,isMetaPressed:e.isMetaPressed},t))}),[p,y,Y]),N=(0,c.useCallback)((function(e,t,n){if(!(t<=0)||x.current){var r=D.current.getGridRef(),l="";if(G)for(var a=e;a>0;a-=1){var o=r.rows[a].getAttribute("data-section-id");if(o){l=o;break}}x.current||(x.current=!0,null!==E.current||r.rows[e].hasAttribute("data-section-id")||(E.current={rowId:r.rows[e].getAttribute("data-row-id"),columnId:F[t].id,columnIndex:t,sectionId:l}));var u=e,c=t;switch(n){case f.KEY_UP:u-=1;break;case f.KEY_DOWN:u+=1;break;case f.KEY_LEFT:c-=1;break;case f.KEY_RIGHT:c+=1}u<=0?u=1:u>=r.rows.length&&(u=r.rows.length-1),c<=0?c=1:c>=F.length&&(c=F.length-1);var i=F[c].id,d=r.rows[u].getAttribute("data-row-id");if(!r.rows[u].hasAttribute("data-section-id")){for(var s="",m=u;m>0;m-=1){var b=r.rows[m].getAttribute("data-section-id");if(b){s=b;break}}Y(d,i,c,s)}}}),[G,F,Y]);return c.default.createElement("div",{className:C("flowsheet-data-grid-container"),onKeyUp:function(e){if(e.keyCode===f.KEY_SHIFT)x.current&&(x.current=!1,E.current=null)}},c.default.createElement(w.default,{id:t,ariaLabel:r,ariaLabelledBy:n,rows:T,sections:G,rowHeight:b,rowHeaderIndex:0,pinnedColumns:A,overflowColumns:L,defaultColumnWidth:d,columnHeaderHeight:s,onCellSelect:B,onSectionSelect:h,onClearSelection:g,onCellRangeSelect:N,hasVisibleColumnHeaders:I,ref:D,rowMinimumHeight:P,isAutoFocusEnabled:M}),c.default.createElement(m.default,{"aria-live":"polite",text:H}))}O.propTypes=y,O.defaultProps={defaultColumnWidth:200,columnHeaderHeight:"2.5rem",rows:[],columns:[],hasVisibleColumnHeaders:!0};t.default=(0,d.injectIntl)(O)},44034:function(e,t,n){var r=n(24994),l=n(73738);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(43693)),o=w(n(96540)),u=r(n(5556)),c=r(n(67967)),i=w(n(25966)),d=n(83264),s=r(n(8247)),f=r(n(62227)),m=r(n(78323));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=c.default.bind(s.default),S={ariaLabelledBy:u.default.string,ariaLabel:u.default.string,id:u.default.string.isRequired,rows:u.default.arrayOf(d.rowShape),pinnedColumns:u.default.arrayOf(d.columnShape),overflowColumns:u.default.arrayOf(d.columnShape),defaultColumnWidth:u.default.number,columnHeaderHeight:u.default.string,rowHeight:u.default.string,rowHeaderIndex:d.validateRowHeaderIndex,onColumnResize:u.default.func,onCellSelect:u.default.func,onRowSelect:u.default.func,onRowSelectAll:u.default.func,onColumnSelect:u.default.func,onClearSelectedRows:u.default.func,onClearSelectedCells:u.default.func,onDisableSelectableRows:u.default.func,onEnableRowSelection:u.default.func,hasSelectableRows:u.default.bool,isAutoFocusEnabled:u.default.bool};function v(e){var t,n=e.id,r=e.ariaLabelledBy,l=e.ariaLabel,a=e.rows,u=e.pinnedColumns,c=e.overflowColumns,d=e.onColumnResize,s=e.defaultColumnWidth,b=e.columnHeaderHeight,w=e.rowHeight,p=e.onColumnSelect,S=e.onCellSelect,v=e.onRowSelect,C=e.onRowSelectAll,y=e.onClearSelectedRows,O=e.onClearSelectedCells,I=e.onDisableSelectableRows,P=e.onEnableRowSelection,M=e.hasSelectableRows,E=e.rowHeaderIndex,_=e.isAutoFocusEnabled,j=(0,o.useRef)(!1),R=(0,o.useRef)({start:null,end:null}),H=(0,o.useRef)(),k=(0,o.useRef)(!1),x=null===(t=document.getElementById("".concat(n,"-worklist-data-grid-container")))||void 0===t?void 0:t.contains(document.activeElement),D=function(e){return e.map((function(e){return h(h({},e),{},{isResizable:!1!==e.isResizable,isSelectable:!1!==e.isSelectable})}))},W=(0,o.useMemo)((function(){return D(u)}),[u]),F=(0,o.useMemo)((function(){return D(c)}),[c]);(0,o.useEffect)((function(){if(M||(R.current={}),k.current){var e=H.current.getFocusedCell();e={row:e.row,col:Math.max(e.col+(M?1:-1),0)},H.current.setFocusedRowCol(e.row,e.col,x)}}),[M]);var A=(0,o.useCallback)((function(){M?(R.current={},a.some((function(e){return e.isSelected}))?y&&y():I&&I()):O&&O()}),[M,O,y,I,a]),L=(0,o.useCallback)((function(e){var t=[];return R.current.end?(R.current.start>R.current.end?e>R.current.end&&(t=a.slice(R.current.end-1,Math.min(e,R.current.start)-1).map((function(e){return{id:e.id,selected:!1}}))):R.current.start<R.current.end&&e<R.current.end&&(t=a.slice(Math.max(R.current.start,e),R.current.end).map((function(e){return{id:e.id,selected:!1}}))),t):t}),[a]),K=(0,o.useCallback)((function(e){if(M||P(),v){var t=Math.min(R.current.start,e),n=Math.max(R.current.start,e),r=a.slice(t-1,n).map((function(e){return{id:e.id,selected:!0}}));r=r.concat(L(e)),v(r),R.current.end=e}}),[M,P,v,a,L]),T=(0,o.useCallback)((function(e,t){var n=[];a[t-1].isSelected?(t===R.current.start&&(R.current={}),n.push({id:e,selected:!1})):(R.current={start:t,end:null},n.push({id:e,selected:!0})),v&&v(n)}),[v,a]),G=(0,o.useCallback)((function(e,t,n){var r=e;n===i.KEY_UP?0===(r-=1)&&(r=1):n===i.KEY_DOWN&&(r+=1),j.current||(j.current=!0,R.current={start:e,end:null}),K(r)}),[K]),z=(0,o.useCallback)((function(e){M?e.isShiftPressed&&R.current.start?K(e.rowIndex):T(e.rowId,e.rowIndex):e.isShiftPressed&&(R.current={start:e.rowIndex,end:null},K(e.rowIndex))}),[M,K,T]),Y=(0,o.useCallback)((function(e,t){M||e.isShiftPressed?z(e):e.isCellSelectable&&S&&S(e.rowId,e.columnId,t)}),[z,M,S]),B=(0,o.useCallback)((function(){p(m.default.ROW_SELECTION_COLUMN.id)}),[p]);return o.default.createElement("div",{id:"".concat(n,"-worklist-data-grid-container"),onKeyDown:function(e){if(e.keyCode===i.KEY_A)M&&(e.ctrlKey||e.metaKey)&&(C&&C(),e.preventDefault())},onKeyUp:function(e){if(e.keyCode===i.KEY_SHIFT)j.current=!1},className:g("worklist-data-grid-container"),onFocus:k.current?void 0:function(){k.current=!0}},o.default.createElement(f.default,{id:n,ariaLabel:l,ariaLabelledBy:r,rows:a,rowHeight:w,rowHeaderIndex:E,pinnedColumns:W,overflowColumns:F,defaultColumnWidth:s,columnHeaderHeight:b,onColumnSelect:p,onRowSelectionHeaderSelect:p?B:void 0,onColumnResize:d,onCellSelect:Y,onClearSelection:A,onRangeSelection:G,hasSelectableRows:M,isAutoFocusEnabled:_,ref:H}))}v.propTypes=S,v.defaultProps={rowHeaderIndex:0,defaultColumnWidth:200,columnHeaderHeight:"2.5rem",rowHeight:"2.5rem",pinnedColumns:[],overflowColumns:[],rows:[]};t.default=v},45663:function(e,t,n){var r=n(24994),l=n(73738);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ColumnHighlightColor",{enumerable:!0,get:function(){return o.ColumnHighlightColor}}),Object.defineProperty(t,"FlowsheetDataGrid",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"WorklistDataGrid",{enumerable:!0,get:function(){return a.default}});var a=r(n(44034)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var c=a?Object.getOwnPropertyDescriptor(e,o):null;c&&(c.get||c.set)?Object.defineProperty(r,o,c):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(6432));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}},3321:function(e,t,n){n.r(t),t.default={"flowsheet-data-grid-container":"FlowsheetDataGrid-module__flowsheet-data-grid-container___O1y8B"}},8247:function(e,t,n){n.r(t),t.default={"worklist-data-grid-container":"WorklistDataGrid-module__worklist-data-grid-container___IbMs4"}}}]);