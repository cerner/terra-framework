import { Badge } from 'terra-pills/package.json?dev-site-package';
import { Notice } from '@cerner/terra-docs';

<Badge />

# Accessibility Guide for Terra Filter Pills

Filter Pills have special interactions and construction that makes them unique from standard buttons and interactive list items.

## Important Considerations:

### Construction of Group Label / Heading

- Filter Pills as a group requires that an `aria-label` be provided as accessibility minimum standard protection, but is not visible, and therefore is not reccomended to be used alone.
- For accessibility best practices, it is recommended that consumers should always include a visible label by using the `ariaLabelledBy` prop.
- Filter Pills are commonly used in a group or list, which must include a label to indicate the intent or purpose of the contents of the list. Accordingly, the filter pills component requires the `ariaLabel` prop for accessibility minimum standards, to give a screenreader user the proper context of the list, but it is not visible to users.


<Notice variant="important" ariaLevel="1">
Accessibility Considerations:

As a best practice, the Filter Pills component should be accompanied by a visible label, which may need to be styled and positioned by the consumer according to their specific usage. Use the `ariaLabelledBy` prop in Filter Pills, and provide it the ʻidʼ of the visible label or heading. This will allow for the visible text to be accessibly connected to the pills.

```diff
    <div className={cx('filter-group-panel')}>
+       <span id="search-terms-fiter-label" className={cx('title-label')}>
+       Patient Education Search Terms:
+       </span>
        <FilterPills
+           ariaLabelledBy="search-terms-fiter-label"
            ariaLabel="Patient Education Search Terms"
            onRemove={handleOnRemove}
        >
            {pills.map((pill, index) => (
                <Pill
                    label={pill.label}
                    labelCategory={pill.labelCategory}
                    id={pill.id}
                    key={pill.id}
                    metaData={{ index }}
                />
            ))}
        </FilterPills>
    </div>
```

Note: _The visible label referenced by the `ariaLabelledBy` prop and the `ariaLabel` prop should be set to the same string values for fallback protection, even though `ariaLabelledBy` should override `ariaLabel`._
</Notice>

## Usability Expectations:

### Interaction Details:

- Filter Pills receives focus as a group by `tab` keypress, with arrow keys changing focus between individual pills within the group.
- Only one pill can be focused per set of Filter Pills.
- The remove button must not be a focusable element, but can be clickable.
- Removing a filter pill with a keyboard is performed with the `Backspace` or `Delete` key when a pill has focus.

## Keyboard Navigation:
- Filter Pills will have the following keyboard navigation expectations:

<table style={{ margin: "5px", border: "1px solid #0000", 'border-collapse': "collapse" }}>
  <tr>
    <th>Key / Sequence</th>
    <th>Description</th> 
  </tr>
  <tr>
    <td>Tab</td>
    <td>Initial focus goes to the first pill in the list, pressing tab again moves focus out of the Filter Pills group and to the next focusable element on the page.</td>
  </tr>
  <tr>
    <td>Right</td>
    <td>Right arrow key will move focus to the next pill in the list. When on the last pill in the list, focus remains on the last pill and does not cycle to the first pill.</td>
  </tr>
  <tr>
    <td>Left</td>
    <td>Left arrow key will move focus to the previous pill in the list. When on the first pill in the list, focus remains on the first pill and does not cycle to the last pill.</td>
  </tr>
  <tr>
    <td>Backspace or Delete</td>
    <td>Removes the pill that currently has focus. After removing, the focus should then be placed on the previous pill in the list. If no pills remain then the Filter Pills group will be focused until user navigates away. However the Filter Pills group cannot be focused on again while no interactive pills remain in the Filter Pills group.</td>
  </tr>
  <tr>
    <td>Enter or Space</td>
    <td>If a pill is selectable via having truncated label, Enter or Space will show the popup to display the full pill label.</td>
  </tr>
</table>

## Support Compliance

### Supported Features & Technology
- Keyboard Interactions
- PC: JAWS Support with Chrome (latest)
- MAC: VoiceOver Support with Chrome (latest), Safari (latest)

### Requiring Further Enhancement to Support
- Mobile Touch Interactions with Screen Reader assistive technology
- Speech Input Interactions with assistive technology
- PC: NVDA Support
